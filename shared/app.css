:root{
    --as-bg:#0b0f12;
    --as-panel:#11161b;
    --as-card:#161c22;
    --as-text:#e8f0f5;
    --as-dim:#9bb0bd;
    --as-accent:#00b37d;
    --as-accent-2:#2aa0ff;
  }

  /* Light theme overrides */
  :root[data-theme="light"]{
    --as-bg:#f4f5f7;
    --as-panel:#ffffff;
    --as-card:#ffffff;
    --as-text:#11161b;
    --as-dim:#5c6b7a;
    --as-accent:#007a4a;
    --as-accent-2:#1b7fd9;
  }

  /* Light-mode surfaces */
  :root[data-theme="light"] body{
    background:var(--as-bg);
    color:var(--as-text);
  }

  /* FILTER PANELS (the dark boxes in your screenshot) */
  :root[data-theme="light"] .as-filter-body{
    background:#ffffff;
    border:1px solid rgba(0,0,0,.06);
    box-shadow:0 6px 18px rgba(15,20,24,.06);
  }

  /* VEHICLE CARDS */
  :root[data-theme="light"] .as-card{
    background:#ffffff;
    border-color:rgba(0,0,0,.08);
    box-shadow:0 10px 26px rgba(15,20,24,.08);
  }

  :root[data-theme="light"] .as-thumb{
    background:#dde2e8;
  }

  /* NEW LIST TOOLBAR */
  :root[data-theme="light"] .as-listbar-new{
    background:var(--as-panel);
    border:1px solid rgba(0,0,0,.06);
  }

  /* FILTER INPUTS & SELECTS */
  :root[data-theme="light"] .asf input,
  :root[data-theme="light"] .asf select,
  :root[data-theme="light"] .asf textarea,
  :root[data-theme="light"] .asf .w-input,
  :root[data-theme="light"] .asf .w-select{
    background:#ffffff;
    border-color:rgba(0,0,0,.14);
    color:#11161b;
  }

  :root[data-theme="light"] #asf-use-loc{
    background:#ffffff;
    border-color:rgba(0,0,0,.14);
    color:#11161b;
  }

  *{box-sizing:border-box}


  *{box-sizing:border-box}
  body{
    background:var(--as-bg);
    color:var(--as-text);
    font-family:system-ui,-apple-system,Segoe UI,Inter,Roboto,"Helvetica Neue",Arial,sans-serif;
    -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    font-size:16px;
    line-height:1.6;
  }

  /* Layout shell (no grid enforcement here) */
  .as-wrap{padding:min(3vw,32px)}
  .as-grid{
    display:grid;
    grid-template-columns:minmax(260px,340px) 1fr;
    gap:clamp(16px,2vw,24px);
    align-items:start;
    max-width:2000px;
    margin-inline:auto;
  }
  @media (min-width:1600px){
    .as-grid{grid-template-columns:minmax(300px,380px) 1fr}
  }

  /* Left panel */
  .as-filter{position:sticky;top:16px;align-self:start}
  .as-filter-head{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:12px}
  .as-filter-title{font-weight:600;letter-spacing:.2px}
  .as-count-badge{
    font:500 12px/1.6 system-ui,-apple-system,Segoe UI;
    background:linear-gradient(90deg,var(--as-accent) 0%,var(--as-accent-2) 100%);
    -webkit-background-clip:text;color:transparent;white-space:nowrap
  }
  .as-filter-body{
    background:var(--as-panel);
    border:1px solid rgba(255,255,255,.06);
    border-radius:16px;
    padding:16px;
    box-shadow:0 6px 24px rgba(0,0,0,.25) inset,0 8px 24px rgba(0,0,0,.2)
  }

  /* Right side scaffolding (no map canvas rules here) */
  .as-main{display:flex;flex-direction:column;gap:clamp(12px,1.6vw,20px)}
  .as-mapwrap{
    background:var(--as-panel);
    border:1px solid rgba(255,255,255,.06);
    border-radius:16px;
    overflow:hidden;
  }
  .as-map{width:100%;height:auto} /* height handled by Step-5 to avoid conflicts */

  /* Toolbar */
  .as-toolbar{display:flex;flex-wrap:wrap;align-items:center;gap:10px 16px;justify-content:space-between;padding:10px 0}
  .as-tool-left,.as-tool-right{display:flex;align-items:center;gap:10px}
  .as-tool-right{margin-left:auto}
  #as-sort{
    background:var(--as-panel);
    border:1px solid rgba(255,255,255,.12);
    padding:8px 10px;border-radius:10px;color:var(--as-text);
  }
  #as-map-toggle,#as-fav-toggle,#as-more{
    background:transparent;border:1px solid rgba(255,255,255,.18);
    padding:10px 12px;border-radius:12px;color:var(--as-text);cursor:pointer
  }
  #as-map-toggle:hover,#as-fav-toggle:hover,#as-more:hover{border-color:rgba(255,255,255,.35)}

  /* Card skin (no price visibility rules here; Step-5 controls the bubble/row) */
  .as-card{
    background:var(--as-card);
    border-radius:16px;
    overflow:hidden;
    border:1px solid rgba(255,255,255,.06);
    display:flex;flex-direction:column;position:relative
  }
   
  .as-body{display:flex;flex-direction:column;padding:12px;gap:6px}
  .as-title{font-weight:700;font-size:1.15rem !important;}
  .as-sub{opacity:.9;font-size:1rem;display:flex;gap:.5rem;flex-wrap:wrap}
  .as-cta{display:inline-flex;align-items:center;justify-content:center;padding:10px 12px;border-radius:12px;border:1px solid rgba(255,255,255,.12);text-decoration:none;color:var(--as-text);margin-top:auto;font-size:1.05rem !important;}
  .as-cta:hover{border-color:rgba(255,255,255,.35)}

/* === Card layout fixes (pure CSS; no JS or big-embed edits) === */

/* 1) Title stack: make + model stay on line 1; trim becomes a new line under them */
.as-title{
  display:flex;
  flex-wrap:wrap;                 /* lets trim wrap to its own line */
  gap:6px 8px;
}
.as-title .as-trim{
  display:block;                  /* forces a new line within .as-title */
  flex-basis:100%;
  order:2;                        /* ensure it's below make/model */
  font-weight:500;
  font-size:.85rem;
  opacity:.9;
  margin-top:2px;
}

/* 2) Hide any visible colour text on the card (filters still read the hidden spans) */
.as-color,
.as-colour,
.as-body [fs-list-field="colour"],
.as-body [fs-list-field="color"]{
  display:none !important;
}

/* 3) Finance per month pinned to the right on the Fuel • Gearbox row */
.as-meta-b{
  display:flex;
  align-items:baseline;
  gap:.5rem;
}
.as-finance-inline{
  margin-left:auto;               /* push to the right */
  white-space:nowrap;
  font-weight:600;
  color:#3fb1ce;                  /* your brand blue */
}

/* placeholder styling when there is no numeric finance */
.as-finance-inline--fallback{
  color: var(--as-dim);
  font-weight:500;
}

/* hide truly empty finance cells */
.as-finance-inline:empty{
  display:none;
}

/* only add £ and " / month" to REAL finance values */
.as-finance-inline:not(:empty):not(.as-finance-inline--fallback)::before{
  content:"£";
}
.as-finance-inline:not(:empty):not(.as-finance-inline--fallback)::after{
  content:" / month";
}


/* one-line spacer for non-wrapping rows */
.as-meta-b--pad { margin-bottom: 1.25em; }   /* tweak this value */

/* Hide Trim visually on cards (kept in DOM for filters) */
.as-trim{ display:none !important; }

/* FINAL OVERRIDE: Edition should wrap and always have a 2-line slot */
.as-card .as-line.as-edition{
  display:block;
  font-size:.9rem;
  line-height:1.35;
  opacity:.92;

  /* Kill all the old single-line + ellipsis behaviour */
  white-space:normal !important;
  overflow:visible !important;
  text-overflow:clip !important;

  /* Reserve 2 lines of vertical space so short editions get a "blank" second line */
  min-height:calc(1.35em * 2);
  margin-bottom:2px;
}


/* === NEW: Price pill borders === */
.as-price-badge {
  border: 1.5px solid #3FB1CE !important;
}

/* === NEW: Larger text across page === */
.as-card .as-meta {
  font-size: 1rem !important;
}

.as-card .as-line {
  font-size: 1rem !important;
}

@media (min-width: 1200px) {
  body {
    font-size: 17px;
  }
  
  .as-card .as-title {
    font-size: 1.2rem !important;
  }
}

/* Fuel • Gearbox + monthly finance row */
.as-meta.as-meta-b{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:8px;
}

/* Left side: Fuel • Gearbox can wrap */
.as-meta.as-meta-b .as-fg{
  flex:1 1 auto;
  min-width:0;
  white-space:normal;       /* allow wrapping */
}

/* Right side: monthly price stays pinned right, one line */
.as-meta.as-meta-b .as-finance-inline{
  flex:0 0 auto;
  white-space:nowrap;       /* never wraps */
  margin-left:8px;
  text-align:right;
}

/* === Fuel / Gearbox on one line, monthly price on its own line === */
.as-meta.as-meta-b{
  display:block;
  margin-top:8px;
  padding-top:8px;
  border-top:1px solid rgba(255,255,255,0.06); /* thin divider above the block */
}

/* Fuel • Gearbox */
.as-meta.as-meta-b .as-fg{
  display:block;
  margin-bottom:4px;
  white-space:normal;   /* allow wrapping: "Petrol Plug-In Hybrid • Automatic" can go to 2 lines */
}

/* Monthly price on its own line, right-aligned */
.as-meta.as-meta-b .as-finance-inline{
  display:block;
  text-align:right;
  white-space:nowrap;
}

/* Divider between edition and year/mileage */
.as-meta.as-meta-a{
  margin-top:6px;
  padding-top:6px;
  border-top:1px solid rgba(255,255,255,0.18); /* more visible line */
}

/* Fuel/Gearbox + finance block: clearer line, tighter spacing */
.as-meta.as-meta-b{
  display:block;
  margin-top:4px;
  padding-top:6px;
  border-top:1px solid rgba(255,255,255,0.18); /* more visible line */
}

/* Fuel • Gearbox above */
.as-meta.as-meta-b .as-fg{
  display:block;
  margin-bottom:2px;
  white-space:normal;   /* so "Petrol Plug-In Hybrid • Automatic" can wrap */
}

/* Monthly finance: own line, left-aligned */
.as-meta.as-meta-b .as-finance-inline{
  display:block;
  text-align:left;
  white-space:nowrap;
}

/* === Tighten vertical spacing inside cards === */

/* Year / mileage row */
.as-meta.as-meta-a{
  margin-top:3px;
  padding-top:3px;
  border-top:1px solid rgba(255,255,255,0.18);
}

/* Fuel/gearbox + finance block */
.as-meta.as-meta-b{
  margin-top:3px;
  padding-top:4px;
  border-top:1px solid rgba(255,255,255,0.18);
}

/* Fuel • Gearbox line */
.as-meta.as-meta-b .as-fg{
  margin-bottom:1px;
  line-height:1.25;
}

/* Finance line */
.as-meta.as-meta-b .as-finance-inline{
  line-height:1.25;
}

/* === Fine-tune vertical spacing for meta rows === */

/* Year / mileage row: less space before the line below */
.as-meta.as-meta-a{
  margin-top:2px;
  padding-top:2px;
  border-top:1px solid rgba(255,255,255,0.18);
}

/* Fuel/gearbox + finance block:
   smaller gap from year/mileage to the line,
   but a bit more padding from the line to the text */
.as-meta.as-meta-b{
  margin-top:1px;           /* tighter to the row above */
  padding-top:6px;          /* more space from line to content */
  border-top:1px solid rgba(255,255,255,0.18);
}

/* Fuel • Gearbox just above finance */
.as-meta.as-meta-b .as-fg{
  margin-bottom:2px;
  line-height:1.25;
}

/* Finance: a little breathing room from the line above */
.as-meta.as-meta-b .as-finance-inline{
  display:block;
  margin-top:5px;
  line-height:1.25;
}

/* Make the card separator line visible on light theme */
:root[data-theme="light"] .as-meta.as-meta-b{
  border-top-color: rgba(0,0,0,0.08); /* subtle dark line on white cards */
}


/* Finance placeholder override */
.as-finance-inline--fallback{
  color: var(--as-dim);
  font-weight: 500;
}

/* Keep hiding truly empty finance cells */
.as-finance-inline:empty{
  display: none;
}

/* Only add £ and " / month" when it's NOT a fallback */
.as-finance-inline:not(:empty):not(.as-finance-inline--fallback)::before{
  content: "£";
}
.as-finance-inline:not(:empty):not(.as-finance-inline--fallback)::after{
  content: " / month";
}


  /* Light-mode filter boxes (the big dark panels) */
  :root[data-theme="light"] .as-filter-body{
    background:#ffffff;
    border:1px solid rgba(0,0,0,.08);
    box-shadow:0 8px 24px rgba(15,20,24,.06);
  }

  :root[data-theme="light"] .as-filter-head,
  :root[data-theme="light"] .as-filter-title,
  :root[data-theme="light"] .as-filter-body,
  :root[data-theme="light"] .as-filter-body label{
    color:var(--as-text);
  }
  /* Make vehicle images fill the thumb cleanly */
  .as-thumb{
    overflow:hidden;
  }

  /* Light mode CTA button */
  :root[data-theme="light"] .as-cta{
    background:var(--as-accent-2);
    color:#ffffff;
    border-color:var(--as-accent-2);
  }

  :root[data-theme="light"] .as-cta:hover{
    filter:brightness(1.05);
  }
  
  /* =========================================================
   Vehicle card image: taller + wide-image support
========================================================= */

/* 1) Taller image slot (16/10 -> 16/12 ≈ +20% height) */
.as-thumb{
  aspect-ratio: 16/12 !important; /* change to 16/11.5 for ~15% instead */
  position: relative;            /* needed for fade overlays */
  overflow: hidden;
  background-color:#0f1418;      /* matches your current dark thumb base */
}

/* Keep your default behaviour: most images still "cover" nicely */
.as-thumb{
  background-position:center;
  background-repeat:no-repeat;
  background-size:cover;
}
.as-thumb img{
  width:100%;
  height:100%;
  display:block;
  object-fit:cover;
}


  /* === Light theme refinements === */

  /* Distance filter panel + other filter bodies */
  :root[data-theme="light"] .as-filter-body{
    background:#ffffff;
    border:1px solid rgba(0,0,0,.08);
    box-shadow:0 8px 24px rgba(15,20,24,.06);
    color:var(--as-text);
  }

  /* Distance row + +/- buttons */
  :root[data-theme="light"] .asf-distance,
  :root[data-theme="light"] .asf-distance-row{
    background:#ffffff;
  }

  :root[data-theme="light"] .asf .asf-dist-step{
    background:#ffffff;
    border:1px solid rgba(0,0,0,.15);
    color:#11161b;
    box-shadow:0 2px 6px rgba(15,20,24,.12);
  }

  /* Dropdown list background (the actual option menu) */
  :root[data-theme="light"] .asf select option,
  :root[data-theme="light"] .asf select optgroup{
    background-color:#ffffff;
    color:#11161b;
  }


  /* View Details – pin blue (#3FB1CE) in light mode */
  :root[data-theme="light"] .as-cta{
    background:#3FB1CE;
    border-color:#3FB1CE;
    color:#ffffff;
  }
  :root[data-theme="light"] .as-cta:hover{
    filter:brightness(1.05);
  }
    /* Light mode – all filter panels white */
  :root[data-theme="light"] #asf-vehicle,
  :root[data-theme="light"] #asf-distance,
  :root[data-theme="light"] #asf-price,
  :root[data-theme="light"] #asf-finance,
  :root[data-theme="light"] #asf-more,
  :root[data-theme="light"] #asf-year,
  :root[data-theme="light"] #asf-mileage{
    background:#ffffff !important;
    border:1px solid rgba(0,0,0,.08);
    box-shadow:0 8px 24px rgba(15,20,24,.06);
    color:#11161b;
  }


  /* --- Light mode: View Details CTA in Ticary blue --- */
  :root[data-theme="light"] .as-cta{
    background:#3FB1CE;
    border-color:#3FB1CE;
    color:#ffffff;
  }
  :root[data-theme="light"] .as-cta:hover{
    filter:brightness(1.05);
  }
  /* Card images – fill the frame nicely */
  img.as-thumb{
    display:block;
    width:100%;
    height:100%;
    object-fit:cover;
  }
 
/* === Global dual-range sliders (price, finance, year, mileage, distance) === */

.as-range{
  position:relative;
  height:34px;
  display:block;
}

/* Native input track invisible; we draw our own bar */
.as-range input[type="range"]{
  -webkit-appearance:none;
  appearance:none;
  position:absolute;
  left:0;
  right:0;
  top:8px;
  height:18px;
  margin:0;
  background:transparent;
  pointer-events:auto;
}
.as-range input[type="range"]::-webkit-slider-runnable-track{
  height:6px;
  background:transparent;
}
.as-range input[type="range"]::-moz-range-track{
  height:6px;
  background:transparent;
}

/* Thumb – your original blue dot */
.as-range input[type="range"]::-webkit-slider-thumb{
  -webkit-appearance:none;
  appearance:none;
  width:18px;
  height:18px;
  border-radius:50%;
  background:var(--pin,#3FB1CE);
  border:1px solid rgba(0,0,0,.6);
  box-shadow:0 1px 0 rgba(255,255,255,.2) inset, 0 1px 6px rgba(0,0,0,.4);
  cursor:pointer;
}
.as-range input[type="range"]::-moz-range-thumb{
  width:18px;
  height:18px;
  border-radius:50%;
  background:var(--pin,#3FB1CE);
  border:1px solid rgba(0,0,0,.6);
  box-shadow:0 1px 0 rgba(255,255,255,.2) inset, 0 1px 6px rgba(0,0,0,.4);
  cursor:pointer;
}

/* Bar behind thumbs – dark so it’s visible on white */
.as-range .as-range-track{
  position:absolute;
  left:0;
  right:0;
  top:16px;
  height:6px;
  border-radius:99px;
  background:#222a33;
  border:1px solid #2f3944;
  overflow:hidden;
  pointer-events:none;
  z-index:0;
}

/* Filled segment between thumbs – blue gradient */
.as-range .as-range-track::before{
  content:"";
  position:absolute;
  top:-1px;
  bottom:-1px;
  left:var(--a,0%);
  right:calc(100% - var(--b,100%));
  background:linear-gradient(90deg,#3FB1CE,#1D8CFF);
  border:1px solid #1D8CFF;
  border-radius:inherit;
}

/* Thumbs always over the bar */
.as-range input[type="range"]{
  z-index:1;
}
.as-range input[type="range"].is-top{
  z-index:2;
}
/* === Ticary dual-range sliders (same in light & dark) === */

.as-range{
  position:relative;
  height:34px;
  display:block;
}

/* Hide the native track – we draw our own bar */
.as-range input[type="range"]{
  -webkit-appearance:none;
  appearance:none;
  position:absolute;
  left:0;
  right:0;
  top:8px;
  height:18px;
  margin:0;
  background:transparent;
  pointer-events:auto;
}
.as-range input[type="range"]::-webkit-slider-runnable-track{
  height:6px;
  background:transparent;
}
.as-range input[type="range"]::-moz-range-track{
  height:6px;
  background:transparent;
}

/* Thumb – same blue dot as before */
.as-range input[type="range"]::-webkit-slider-thumb{
  -webkit-appearance:none;
  appearance:none;
  width:18px;
  height:18px;
  border-radius:50%;
  background:var(--pin,#3FB1CE);
  border:1px solid rgba(0,0,0,.6);
  box-shadow:0 1px 0 rgba(255,255,255,.2) inset, 0 1px 6px rgba(0,0,0,.4);
  cursor:pointer;
}
.as-range input[type="range"]::-moz-range-thumb{
  width:18px;
  height:18px;
  border-radius:50%;
  background:var(--pin,#3FB1CE);
  border:1px solid rgba(0,0,0,.6);
  box-shadow:0 1px 0 rgba(255,255,255,.2) inset, 0 1px 6px rgba(0,0,0,.4);
  cursor:pointer;
}

/* Bar – solid blue across the whole width */
.as-range .as-range-track{
  position:absolute;
  left:0;
  right:0;
  top:16px;
  height:6px;
  border-radius:99px;
  background:linear-gradient(90deg,#3FB1CE,#1D8CFF);
  border:1px solid #1D8CFF;
  overflow:hidden;
  pointer-events:none;
  z-index:0;
}

/* Kill the old "filled segment" logic – full bar is blue */
.as-range .as-range-track::before{
  content:none;
}

/* Thumbs always on top of the bar */
.as-range input[type="range"]{
  z-index:1;
}
.as-range input[type="range"].is-top{
  z-index:2;
}

/* =========================================================
   TICARY — Vehicle card thumbnails (FINAL, single source of truth)
   Requirement: sides always fit, no lateral cropping.
   Taller slot + fade top/bottom for letterbox.
========================================================= */

.as-thumb{
  display:block;
  width:100%;
  aspect-ratio:16/12;              /* ~+20% height vs 16/10 */
  position:relative;
  overflow:hidden;

  background-color: var(--as-thumb-bg, #0f1418);
  background-position:center center;
  background-repeat:no-repeat;

  /* KEY: never crop the sides */
  background-size:contain !important;
}

/* If your thumb is an <img> inside .as-thumb */
.as-thumb img{
  width:100%;
  height:100%;
  display:block;
  object-fit:contain !important;   /* KEY: never crop the sides */
  object-position:center;
}

/* Light theme: subtle off-white background for letterbox space */
:root[data-theme="light"] .as-thumb{
  background-color: #f1f3f5;  /* soft neutral off-white */
}

.ticary-loader {
    position: fixed;
    inset: 0;
    z-index: 9999;
    background: var(--as-bg, #05080b);
    display: flex;
    align-items: center;
    justify-content: center;
    pointer-events: auto;
    opacity: 1;
    visibility: visible;
    transition: opacity 0.32s ease, visibility 0.32s ease;
  }

  .ticary-loader--hide {
    opacity: 0;
    visibility: hidden;
    pointer-events: none;
  }

  .ticary-loader__inner {
    padding: 20px 28px;
    border-radius: 18px;
    background: rgba(10, 14, 18, 0.94);
    box-shadow: 0 18px 40px rgba(0, 0, 0, 0.7);
    backdrop-filter: blur(18px);
    -webkit-backdrop-filter: blur(18px);
    text-align: center;
    min-width: 220px;
    max-width: 280px;
  }

  .ticary-loader__logo {
    font-size: 1.1rem;
    font-weight: 600;
    letter-spacing: 0.14em;
    text-transform: uppercase;
    color: var(--as-text, #e8f0f5);
    margin-bottom: 10px;
  }

  .ticary-loader__logo span {
    color: var(--as-accent-2, #3FB1CE);
  }

  .ticary-loader__spinner {
    width: 32px;
    height: 32px;
    border-radius: 999px;
    border: 2px solid rgba(255, 255, 255, 0.1);
    border-top-color: var(--as-accent-2, #3FB1CE);
    animation: ticary-spin 0.8s linear infinite;
    margin: 0 auto;
  }

  .ticary-loader__text {
    margin-top: 10px;
    font-size: 0.9rem;
    color: var(--as-dim, #9bb0bd);
    white-space: nowrap;
  }

  @keyframes ticary-spin {
    to { transform: rotate(360deg); }
  }
    /* Light theme version of the loading overlay */
  :root[data-theme="light"] .ticary-loader {
    background: var(--as-bg, #f4f5f7);
  }

  :root[data-theme="light"] .ticary-loader__inner {
    background: #ffffff;
    box-shadow: 0 16px 40px rgba(15, 23, 42, 0.16);
  }

  :root[data-theme="light"] .ticary-loader__logo {
    color: var(--as-text, #11161b);
  }

  :root[data-theme="light"] .ticary-loader__logo span {
    color: var(--as-accent-2, #1b7fd9);
  }

  :root[data-theme="light"] .ticary-loader__text {
    color: var(--as-dim, #5c6b7a);
  }

  :root[data-theme="light"] .ticary-loader__spinner {
    border-color: rgba(0, 0, 0, 0.06);
    border-top-color: var(--as-accent-2, #1b7fd9);
  }
  
  /* Mobile – hide active filter tags in the toolbar */
@media (max-width: 768px){
  .as-toolbar .as-tags,
  .as-toolbar .as-tagbar,
  .as-toolbar .as-tagstrip,
  .as-toolbar [data-as-tags],
  .as-toolbar [data-as-active-tags]{
    display:none !important;
  }
}
/* Mobile – hide the active filter tags strip */
@media (max-width: 768px){
  .as-filter-tags{
    display:none !important;
  }
}
/* Map-only view: bottom detail panel on mobile */
@media (max-width: 768px){
  body.as-embed-map .as-map-mobile-panel{
    position:fixed;
    left:0;
    right:0;
    bottom:0;
    z-index:9999;
    background:var(--as-panel,#11161b);
    border-top:1px solid rgba(15,23,42,0.7);
    box-shadow:0 -12px 30px rgba(0,0,0,0.6);
    padding:12px 16px 16px;
    max-height:42vh;
    overflow-y:auto;
  }

  /* Hide Mapbox’s own popups in this mode – we’ll use the panel instead */
  body.as-embed-map .mapboxgl-popup{
    display:none !important;
  }
}

/* === OVERRIDE: edition behaviour – 2-line clamp, equal height, no hover cursor === */

/* Let the wrapper behave like a normal block; no clipping here */
.as-edition-wrap {
  white-space: normal !important;
  overflow: visible !important;
  text-overflow: clip !important;
}

/* Edition text: up to 2 lines, truncated if longer.
   Short editions still reserve space for 2 lines so card heights match. */
.as-edition {
  opacity: .92;
  font-size: .9rem;
  line-height: 1.35;
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 2;          /* clamp at 2 lines */
  overflow: hidden;
  max-height: calc(1.35em * 2 + 2px);
  min-height: calc(1.35em * 2 + 2px);  /* force the “blank line” for short editions */
  cursor: default !important;
}

/* Kill the old hover bubble / question-mark behaviour completely */
.as-edition[data-full] {
  cursor: default !important;
}
.as-edition[data-full]::after {
  content: none !important;
}

/* Mobile – card under the map (just styling) */
@media (max-width: 768px){
  .as-map-mobile-panel{
    margin-top:8px;
    background:var(--as-panel);
    border-radius:16px;
    border:1px solid rgba(255,255,255,.12);
    padding:12px 14px;
  }

  :root[data-theme="light"] .as-map-mobile-panel{
    border-color:rgba(0,0,0,.08);
    box-shadow:0 8px 24px rgba(15,20,24,.06);
  }

  .as-map-mobile-panel .as-pop{
    box-shadow:none;
    border:none;
    background:transparent;
    padding:0;
  }
}

/* === MOBILE: remove map entirely (UI only) === */
@media (max-width: 768px){

  /* Hide the map toggle buttons in the toolbar */
  #as-map-toggle,
  #as-map-toggle-new,
  #as-map-inline-toggle {
    display: none !important;
  }

  /* Hide the map block itself */
  .as-mapwrap,
  #as-map {
    display: none !important;
  }
}

/* MOBILE – lock filters drawer to viewport, no sideways dragging */
@media (max-width: 768px){
  body.as-mobile-filters-open #as-filters,
  body.as-mobile-filters-open #as-filters-body{
    max-width: 100vw !important;
    width: 100vw !important;
    left: 0 !important;
    right: 0 !important;
    overflow-x: hidden !important;
    touch-action: pan-y !important;  /* only vertical scroll */
  }

  body.as-mobile-filters-open .as-col--filters{
    max-width: 100vw !important;
    width: 100vw !important;
  }
}

/* MOBILE – nice light-theme header for filters drawer */
@media (max-width: 768px){
  :root[data-theme="light"] body.as-mobile-filters-open #as-filters,
  :root[data-theme="light"] body.as-mobile-filters-open #as-filters-body{
    background: #f4f5f7 !important;
  }

  :root[data-theme="light"] body.as-mobile-filters-open .asf-mobile-head{
    background: #ffffff !important;
    color: #11161b !important;
    border-bottom: 1px solid rgba(0,0,0,0.08);
  }

  :root[data-theme="light"] body.as-mobile-filters-open .asf-mobile-title{
    color: #11161b !important;
  }

  :root[data-theme="light"] body.as-mobile-filters-open .asf-mobile-close{
    background: #ffffff !important;
    color: #11161b !important;
    border-color: rgba(0,0,0,0.12) !important;
  }
}

/* =========================================================
   TICARY – Full-bleed “slotted together” layout (Homepage/Search)
   Paste at VERY END of page custom code - head.txt
   ========================================================= */

.as-wrap{
  padding: 0 !important;            /* kill outer gutters */
}

.as-grid{
  gap: 0 !important;                /* filters + main touch */
  max-width: none !important;
  margin: 0 !important;
}

/* Right column: remove vertical gaps between map / toolbar / list */
.as-main{
  gap: 0 !important;
}

/* FILTERS block becomes a straight-edged panel */
.as-filter{ top: 0 !important; }    /* optional: keeps it tight to the top */
.as-filter-body{
  border-radius: 0 !important;
  border-left: 0 !important;
  border-top: 0 !important;
  border-bottom: 0 !important;
  /* keep a divider between filters and main */
  border-right: 1px solid rgba(255,255,255,.08) !important;
  box-shadow: none !important;
}

/* Light theme divider */
:root[data-theme="light"] .as-filter-body{
  border-right-color: rgba(0,0,0,.10) !important;
  border-color: rgba(0,0,0,.10) !important;
}

/* MAP block becomes full-width, square-edged */
.as-mapwrap{
  border-radius: 0 !important;
  border-left: 0 !important;
  border-right: 0 !important;
  border-top: 0 !important;
  box-shadow: none !important;
}

/* TOOLBAR sits flush like a “row” between map and results */
.as-toolbar{
  margin: 0 !important;
  padding: 12px 16px !important;
  background: var(--as-panel) !important;
  border-radius: 0 !important;
  border-left: 0 !important;
  border-right: 0 !important;
  border-top: 1px solid rgba(255,255,255,.08) !important;
  border-bottom: 1px solid rgba(255,255,255,.08) !important;
}

:root[data-theme="light"] .as-toolbar{
  border-top-color: rgba(0,0,0,.10) !important;
  border-bottom-color: rgba(0,0,0,.10) !important;
}

/* RESULTS LIST AREA: remove any “panel gap” feeling */
#vehicles-list-wrapper{
  margin-top: 0 !important;
}

/* If you truly want *everything* square (cards too): */
.as-card,
.as-thumb{
  border-radius: 0 !important;
}

/* Mobile: also remove rounding on the mobile map panel if it’s used */
@media (max-width: 768px){
  .as-map-mobile-panel{
    border-radius: 0 !important;
  }
}
/* =========================================================
   TICARY – List toolbar (as-listbar-new) flush + square
   ========================================================= */

/* Kill spacing above & below */
.as-listbar-new{
  margin: 0 !important;
  padding: 12px 16px !important;

  border-radius: 0 !important;
  box-shadow: none !important;

  /* Make it feel like a “slot” between map & results */
  border-left: 0 !important;
  border-right: 0 !important;
  border-top: 1px solid rgba(255,255,255,.08) !important;
  border-bottom: 1px solid rgba(255,255,255,.08) !important;

  background: var(--as-panel) !important;
}

/* Light theme divider colours */
:root[data-theme="light"] .as-listbar-new{
  border-top-color: rgba(0,0,0,.10) !important;
  border-bottom-color: rgba(0,0,0,.10) !important;
}

/* Some layouts wrap it — kill wrapper spacing too */
.as-listbar-new-wrap,
.as-listbar-wrap{
  margin: 0 !important;
  padding: 0 !important;
}

/* =========================================================
   TICARY – Remove gap between MAP and LIST BAR
   ========================================================= */

/* Kill any margin/padding on map containers */
.as-mapwrap,
.as-map,
.as-map-inner,
.as-map-container{
  margin-bottom: 0 !important;
  padding-bottom: 0 !important;
}

/* Mapbox injects its own wrappers */
.mapboxgl-map,
.mapboxgl-canvas-container,
.mapboxgl-canvas{
  display: block !important;
  margin-bottom: 0 !important;
  padding-bottom: 0 !important;
}

/* If a ratio spacer div exists (very common) */
.as-mapwrap::after,
.as-map-inner::after{
  content: none !important;
  display: none !important;
}

/* Some layouts give the map a min-height buffer */
.as-mapwrap{
  min-height: 0 !important;
}

/* Absolute guarantee: toolbar hugs the map */
.as-listbar-new{
  margin-top: 0 !important;
}

/* =========================================================
   TICARY – AI Search button (static, premium, theme-aware)
========================================================= */

#tc-header .tc-header-nav a.tc-ai-btn{
  position: relative !important;
  isolation: isolate;
  overflow: visible !important;

  display: inline-flex !important;
  align-items: center;
  justify-content: center;

  height: 44px !important;
  padding: 0 18px !important;

  /* Less rounded – matches Ticary UI language */
  border-radius: 12px !important;

  font-weight: 900 !important;
  letter-spacing: .01em !important;
  text-decoration: none !important;

  /* Base depth */
  box-shadow:
    0 10px 26px rgba(0,0,0,.18),
    inset 0 0 0 1px rgba(255,255,255,.08);
}

/* -----------------------------
   DARK THEME
------------------------------ */
:root:not([data-theme="light"])
#tc-header .tc-header-nav a.tc-ai-btn{
  background:
    linear-gradient(180deg,
      rgba(26,34,48,.95),
      rgba(16,22,34,.95)
    ) !important;

  color: #ffffff !important;

  border: 1px solid rgba(63,177,206,.55) !important;
}

/* Off-centre white back-light (dark) */
:root:not([data-theme="light"])
#tc-header .tc-header-nav a.tc-ai-btn::before{
  content:"";
  position:absolute;
  z-index:-1;
  pointer-events:none;

  left: 65%;
  top: 35%;
  transform: translate(-50%, -50%);

  width: 140%;
  height: 160%;
  border-radius: 18px;

  background: radial-gradient(
    circle at 30% 30%,
    rgba(255,255,255,.45),
    rgba(255,255,255,.16) 35%,
    rgba(255,255,255,0) 70%
  );

  filter: blur(12px);
  opacity: .85;
}

/* Inner glow + surface highlight (dark) */
:root:not([data-theme="light"])
#tc-header .tc-header-nav a.tc-ai-btn::after{
  content:"";
  position:absolute;
  inset:1px;
  border-radius: inherit;
  pointer-events:none;
  z-index:0;

  background:
    radial-gradient(120px 70px at 30% 25%,
      rgba(255,255,255,.18),
      transparent 60%
    ),
    linear-gradient(
      to bottom,
      rgba(255,255,255,.12),
      transparent 40%
    );
}

/* -----------------------------
   LIGHT THEME
------------------------------ */
:root[data-theme="light"]
#tc-header .tc-header-nav a.tc-ai-btn{
  background:
    linear-gradient(180deg,
      #ffffff,
      #f3f6fa
    ) !important;

  color: #0f172a !important;

  border: 1px solid rgba(15,23,42,.14) !important;

  box-shadow:
    0 10px 26px rgba(15,23,42,.12),
    inset 0 0 0 1px rgba(255,255,255,.75);
}

/* Back-light (light mode – more restrained) */
:root[data-theme="light"]
#tc-header .tc-header-nav a.tc-ai-btn::before{
  content:"";
  position:absolute;
  z-index:-1;
  pointer-events:none;

  left: 60%;
  top: 35%;
  transform: translate(-50%, -50%);

  width: 130%;
  height: 150%;
  border-radius: 18px;

  background: radial-gradient(
    circle at 30% 30%,
    rgba(255,255,255,.85),
    rgba(255,255,255,.35) 35%,
    rgba(255,255,255,0) 70%
  );

  filter: blur(10px);
  opacity: .7;
}

/* Inner glow (light) */
:root[data-theme="light"]
#tc-header .tc-header-nav a.tc-ai-btn::after{
  content:"";
  position:absolute;
  inset:1px;
  border-radius: inherit;
  pointer-events:none;
  z-index:0;

  background: radial-gradient(
    120px 70px at 30% 25%,
    rgba(255,255,255,.65),
    transparent 60%
  );
}

/* Keep text above lighting layers */
#tc-header .tc-header-nav a.tc-ai-btn > *{
  position: relative;
  z-index: 2;
}

/* =========================================================
   TICARY – AI button subtle internal pattern
   Matches header visual language (very faint)
========================================================= */

/* Dark theme pattern */
:root:not([data-theme="light"])
#tc-header .tc-header-nav a.tc-ai-btn{
  background-image:
    /* subtle Ticary-blue pattern */
    repeating-linear-gradient(
      135deg,
      rgba(63,177,206,.08) 0px,
      rgba(63,177,206,.08) 1px,
      transparent 1px,
      transparent 6px
    ),
    /* existing base gradient */
    linear-gradient(180deg,
      rgba(26,34,48,.95),
      rgba(16,22,34,.95)
    ) !important;
}

/* Light theme pattern (much softer) */
:root[data-theme="light"]
#tc-header .tc-header-nav a.tc-ai-btn{
  background-image:
    repeating-linear-gradient(
      135deg,
      rgba(63,177,206,.04) 0px,
      rgba(63,177,206,.04) 1px,
      transparent 1px,
      transparent 7px
    ),
    linear-gradient(180deg,
      #ffffff,
      #f3f6fa
    ) !important;
}

/* =========================================================
   TICARY – Disable hover preview / popup on AI Search button
========================================================= */

/* Kill any preview / tooltip / hover-card behaviour */
#tc-header .tc-header-nav a.tc-ai-btn{
  pointer-events: auto !important;
}

/* If previews are triggered via data-attributes or pseudo-elements */
#tc-header .tc-header-nav a.tc-ai-btn::before,
#tc-header .tc-header-nav a.tc-ai-btn::after{
  pointer-events: none !important;
}

/* Common preview systems use these */
#tc-header .tc-header-nav a.tc-ai-btn[data-preview],
#tc-header .tc-header-nav a.tc-ai-btn[data-tooltip],
#tc-header .tc-header-nav a.tc-ai-btn[data-hover]{
  all: unset;
}

/* If a hover-card container is injected */
.tc-hover-preview,
.tc-nav-preview{
  display: none !important;
}

/* =========================================================
   TICARY — SEARCH PAGE: REMOVE OLD MAP AREA COMPLETELY
   - Kills the black space (desktop + mobile)
   - Makes map unopenable via old toggles
========================================================= */

/* Always collapse the old map area */
.as-mapwrap,
#as-map{
  display: none !important;
  height: 0 !important;
  min-height: 0 !important;
  max-height: 0 !important;
  overflow: hidden !important;
  padding: 0 !important;
  margin: 0 !important;
}

/* Hide map toggle buttons everywhere */
#as-map-toggle,
#as-map-toggle-new,
#as-map-inline-toggle{
  display: none !important;
}

/* ===== TICARY Card Upgrade (sketch layout) ===== */

.as-card{
  position:relative;
  overflow:hidden;
  border-radius:18px;
}

.as-media{
  position:relative;
  display:block;
  border-bottom:1px solid rgba(255,255,255,.08);
}


.as-price-badge{
  position:absolute;
  top:12px;
  left:12px;
  z-index:5;
  padding:8px 10px;
  border-radius:12px;
  font-weight:900;
  font-size:13px;
  letter-spacing:-.01em;
  color:#fff;
  background:rgba(0,0,0,.55);
  border:1px solid rgba(255,255,255,.14);
  backdrop-filter:blur(10px);
  -webkit-backdrop-filter:blur(10px);
}

/* Heart button injected by Part B — place it on the image */
.as-fav-btn{
  position:absolute !important;
  top:12px;
  right:12px;
  z-index:6;
  width:42px;
  height:42px;
  border-radius:14px;
  background:rgba(0,0,0,.45);
  border:1px solid rgba(255,255,255,.14);
  backdrop-filter:blur(10px);
  -webkit-backdrop-filter:blur(10px);
  display:grid;
  place-items:center;
}
.as-fav-btn svg{ width:20px; height:20px; }
.as-fav-btn[aria-pressed="true"]{
  background:rgba(239,68,68,.25);
  border-color:rgba(239,68,68,.65);
}

/* Body layout */
.as-body{
  padding:12px 12px 12px;
}

.as-titleRow{
  display:flex;
  align-items:baseline;
  justify-content:space-between;
  gap:10px;
  font-weight:950;
  letter-spacing:-.02em;
}
.as-titleRow .as-make,
.as-titleRow .as-model{
  font-size:15px;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}
.as-titleRow .as-make{ opacity:.92; }
.as-titleRow .as-model{ opacity:1; text-align:right; }

.as-edition{
  margin-top:4px;
  font-size:12px;
  font-weight:750;
  opacity:.72;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}

/* Spec chips (2x2 feel) */
.as-chips{
  margin-top:10px;
  display:grid;
  grid-template-columns:repeat(2, minmax(0,1fr));
  gap:8px;
}
.as-chip{
  padding:8px 10px;
  border-radius:12px;
  font-size:12px;
  font-weight:850;
  background:rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.10);
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}

/* Bottom split: dealer left / actions right */
.as-bottom{
  margin-top:12px;
  display:grid;
  grid-template-columns: minmax(0,1fr) 160px;
  gap:10px;
  align-items:stretch;
}

.as-dealerName{
  font-size:12px;
  font-weight:900;
  opacity:.92;
}
.as-dealerMeta,
.as-dealerPhone{
  margin-top:3px;
  font-size:11px;
  font-weight:700;
  opacity:.65;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}

.as-actions{
  display:flex;
  flex-direction:column;
  gap:8px;
  justify-content:flex-end;
}

.as-cta{
  display:flex;
  align-items:center;
  justify-content:center;
  padding:10px 12px;
  border-radius:14px;
  font-weight:900;
  text-decoration:none;
  border:1px solid rgba(255,255,255,.10);
  background:rgba(255,255,255,.06);
}
.as-cta:hover{
  transform:translateY(-1px);
}

/* Finance block on the card */
.as-financeWrap{
  border-radius:14px;
  border:1px solid rgba(63,177,206,.22);
  background:rgba(63,177,206,.10);
  padding:10px 10px;
  text-align:center;
}
.as-financeLabel{
  font-size:10px;
  font-weight:950;
  letter-spacing:.08em;
  text-transform:uppercase;
  opacity:.75;
}
.as-finance-inline{
  display:block;
  margin-top:2px;
  font-size:13px;
  font-weight:950;
  color:#3fb1ce;
}

/* Mobile: stack bottom area */
@media (max-width:520px){
  .as-thumb{ height:190px; }
  .as-bottom{ grid-template-columns:1fr; }
  .as-actions{ flex-direction:row; }
  .as-cta{ flex:1; }
  .as-financeWrap{ flex:1; }
}

/* Bigger make/model, smaller edition */
.as-titleRow .as-make,
.as-titleRow .as-model{
  font-size:17px;         /* bigger */
  font-weight:950;
}

.as-edition{
  font-size:12px;         /* smaller than title */
  font-weight:750;
  opacity:.70;
}

/* Spec pills: Ticary blue with white text */
.as-chip{
  background:#3fb1ce;
  border:1px solid rgba(255,255,255,.18);
  color:#fff;
}

/* Make icons look intentional, not huge */
.as-chip-ic{
  display:inline-flex;
  width:18px;
  justify-content:center;
  margin-right:6px;
  transform:translateY(0.5px);
  opacity:.95;
}

.as-chip-t{
  display:inline-block;
  min-width:0;
}

/* Finance box: just label, keep it looking like a button */
.as-financeWrap{
  background:rgba(63,177,206,.12);
  border:1px solid rgba(63,177,206,.28);
}
.as-financeLabel{
  color:var(--as-text);           /* matches your blue pills vibe */
  opacity:.92;
  text-transform:none;     /* make it feel like a button label */
  letter-spacing:0;
  font-size:12px;
  font-weight:950;
}

/* ===== Card polish overrides ===== */

/* Make + model read as one phrase */
.as-titleRow{
  display:flex;
  justify-content:flex-start;   /* was spacing them out */
  align-items:baseline;
  gap:8px;
}

.as-titleRow .as-make,
.as-titleRow .as-model{
  font-size:17px;
  font-weight:950;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}

.as-titleRow .as-model{
  text-align:left;              /* remove “right aligned” look */
}

/* Edition: less bold, dimmer, tighter spacing to pills */
.as-edition{
  margin-top:4px;
  margin-bottom:6px;            /* reduce gap before pills */
  font-size:12px;
  font-weight:650;              /* less bold */
  opacity:.62;                  /* dim slightly */
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}

/* Pills: NOT Ticary-blue background; bigger text */
.as-chips{
  margin-top:0;                 /* pulls pills closer to edition */
  display:grid;
  grid-template-columns:repeat(2, minmax(0,1fr));
  gap:10px;
}

.as-chip{
  background:rgba(255,255,255,.06);   /* back to subtle surface */
  border:1px solid rgba(255,255,255,.10);
  color:rgba(255,255,255,.92);        /* keep text bright */
  padding:10px 12px;
  border-radius:14px;
  font-size:13px;                     /* bigger text */
  font-weight:850;
  display:flex;
  align-items:center;
  gap:10px;
}

/* Icon = Ticary blue */
.as-chip-ic{
  color:#3fb1ce;                      /* currentColor drives SVG stroke */
  width:18px;
  height:18px;
  display:inline-flex;
  flex:0 0 18px;
}
.as-chip-ic svg{
  width:18px;
  height:18px;
  display:block;
}

/* Slightly soften dealer meta */
.as-dealerMeta,
.as-dealerPhone{
  opacity:.55;
}

/* Light theme: keep pill readable */
:root[data-theme="light"] .as-chip{
  background:rgba(15,23,42,.06);
  border-color:rgba(15,23,42,.10);
  color:rgba(15,23,42,.88);
}

/* ==============================
   Title Typography Upgrade
   ============================== */

/* Make + Model container */
.as-titleRow{
  display:flex;
  justify-content:flex-start;
  align-items:baseline;
  gap:8px;
  margin-bottom:2px;
}

/* MAKE */
.as-titleRow .as-make{
  font-size:18px;
  font-weight:800;
  letter-spacing:-0.02em;
  line-height:1.1;
}

/* MODEL */
.as-titleRow .as-model{
  font-size:18px;
  font-weight:900;              /* slightly stronger than make */
  letter-spacing:-0.02em;
  line-height:1.1;
}

/* EDITION / VARIANT */
.as-edition{
  font-size:13px;
  font-weight:600;              /* lighter than title */
  letter-spacing:-0.01em;
  margin-top:2px;
  margin-bottom:6px;
  opacity:.65;
}

/* ==============================
   Light Theme Refinement
   ============================== */

:root[data-theme="light"] .as-titleRow .as-make{
  color:#1f2937;    /* softer charcoal */
}

:root[data-theme="light"] .as-titleRow .as-model{
  color:#111827;    /* strong but not pure black */
}

:root[data-theme="light"] .as-edition{
  color:#4b5563;    /* refined grey */
}

.as-body{padding-bottom:0!important}.as-bottom{gap:0!important}.as-actions{gap:0!important}

.as-bottom{margin-right:-12px!important}

/* actions fill their column + square right edge */
.as-actions{height:100%!important}.as-actions>*{flex:1!important;display:flex!important;align-items:center!important;justify-content:center!important;border-top-right-radius:0!important;border-bottom-right-radius:0!important}

/* view details always Ticary blue + white (light & dark) */
.as-actions .as-cta{background:#3fb1ce!important;border-color:#3fb1ce!important;color:#fff!important}

.as-actions .as-financeWrap{border-radius:0!important}.as-actions .as-cta{border-radius:0!important;border-top-left-radius:18px!important}

/* === Dealer phone upgrade === */

.as-dealerPhone{
  display:flex;
  align-items:center;
  gap:6px;
  font-size:13px;
  font-weight:800;
  opacity:.95;
}

.as-dealerPhone::before{
  content:"";
  width:16px;
  height:16px;
  display:inline-block;
  background-repeat:no-repeat;
  background-size:16px 16px;
  background-position:center;
  /* Ticary blue SVG phone */
  background-image:url("data:image/svg+xml;utf8,\
<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%233fb1ce' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'>\
<path d='M22 16.92v3a2 2 0 0 1-2.18 2A19.86 19.86 0 0 1 3.08 4.18 2 2 0 0 1 5.06 2h3a2 2 0 0 1 2 1.72c.12.86.32 1.7.59 2.5a2 2 0 0 1-.45 2.11L9.91 9.91a16 16 0 0 0 6.18 6.18l1.58-1.58a2 2 0 0 1 2.11-.45c.8.27 1.64.47 2.5.59A2 2 0 0 1 22 16.92z'/>\
</svg>");
}

/* Light theme: slightly darker text */
:root[data-theme="light"] .as-dealerPhone{
  color:#111827;
}

/* =========================================================
   FIX: prevent thumbnail image tiling/duplication (light theme issue)
   Make thumbs ALWAYS non-repeating, width-fit.
========================================================= */
.as-thumb{
  background-repeat: no-repeat !important;
  background-position: center center !important;
  background-size: contain !important;
}

:root[data-theme="light"] .as-thumb{
  border-bottom: 1px solid rgba(0,0,0,0.002);
}


 /* ====== scoped header styles (th-*) ====== */
  :root{
    --th-bg: rgba(17,22,27,.82);
    --th-border: rgba(255,255,255,.12);
    --th-text: #e8f0f5;
    --th-dim: #c9d3dc;
    --th-pin: #3FB1CE;         /* map pin blue */
    --th-pin-2:#1D8CFF;        /* complementary blue for gradient */
  }
    :root[data-theme="light"]{
    --th-bg: rgba(255,255,255,.94);
    --th-border: rgba(0,0,0,.08);
    --th-text: #11161b;
    --th-dim: #6b7a88;
    /* pins stay on brand */
    --th-pin: #3FB1CE;
    --th-pin-2:#1D8CFF;
  }
    /* Header buttons adapt per theme */
  :root[data-theme="light"] .th-btn{
    background: rgba(255,255,255,.92);
    border-color: rgba(0,0,0,.08);
    color: #11161b;
  }
  :root:not([data-theme="light"]) .th-btn{
    background: rgba(0,0,0,.18);
    border-color: var(--th-border);
    color: var(--th-text);
  }

  /* Favourites heart – readable in both themes */
  .th-fav svg path{
    fill: none;
    stroke: currentColor;
    stroke-width: 2;
  }
  .th-fav:hover svg path{
    fill: #ff4d6d;
    stroke: #ff4d6d;
  }
  .th-fav.has-favs svg path{
    fill: #ff4d6d;
    stroke: #ff4d6d;
  }


  /* Theme toggle pill */
.th-theme{
  margin-left:8px;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  width:40px;
  height:40px;
  border-radius:999px;
  border:1px solid var(--th-border);
  background:rgba(15,23,42,0.75);
  cursor:pointer;
  position:relative;
}

.th-theme:focus-visible{
  outline:2px solid var(--th-pin);
  outline-offset:2px;
}


  .th-wrap{
    position: sticky; top: 0; z-index: 999;
    backdrop-filter: blur(8px);
    background: var(--th-bg);
    border-bottom: 1px solid var(--th-border);
  }
  .th-inner{
    width: min(1240px, 96%);
    margin: 0 auto;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 16px;
    padding: 14px 0;
  }

  /* Logo */
  .th-logo{ display:flex; align-items:center; gap:12px; text-decoration:none; color:var(--th-text); }
    .th-mark{
    width:58px;
    height:58px;
    flex:none;
    border-radius:10px;
    box-shadow:0 4px 14px rgba(0,0,0,.35);
  }
  .th-word{
    font-weight:900;
    letter-spacing:.06em;
    font-size:1.6rem;
    line-height:1;
  }

  /* Emphasise "CAR" with pin gradient + subtle glow underline */
  .th-car{
    background: linear-gradient(90deg, var(--th-pin), var(--th-pin-2));
    -webkit-background-clip: text; background-clip: text; color: transparent;
    position: relative; padding-bottom: 2px;
  }
  .th-car::after{
    content:""; position:absolute; left:0; right:0; bottom:-1px; height:2px;
    background: radial-gradient(closest-side, rgba(63,177,206,.9), rgba(63,177,206,0));
    opacity:.85; border-radius:2px; filter: blur(.3px);
  }
  
  /* =========================================================
   HEADER NAV – match News page nav link styling (V2)
========================================================= */
#tc-header .tc-header-nav{
  display:flex;
  align-items:center;
  gap:44px; /* MORE spacing between nav buttons (was 32px) */
}

/* Make the text feel “heavier” like News */
#tc-header .tc-nav-link{
  font-weight: 800;              /* heavier */
  font-size: 1rem;
  letter-spacing: .01em;
  text-decoration: none;

  /* darker default + no transparency */
  color: var(--th-text);
  opacity: 1;

  /* helps the “boldness” perception on Mac */
  -webkit-font-smoothing: antialiased;
  text-rendering: geometricPrecision;

  transition: color .15s ease, opacity .15s ease;
}

/* Hover/focus stays crisp */
#tc-header .tc-nav-link:hover,
#tc-header .tc-nav-link:focus-visible{
  color: var(--th-text);
  opacity: 1;
}

/* Light theme: still readable but not washed out */
:root[data-theme="light"] #tc-header .tc-nav-link{
  color:#111827;
  opacity: .92;
}
:root[data-theme="light"] #tc-header .tc-nav-link:hover,
:root[data-theme="light"] #tc-header .tc-nav-link:focus-visible{
  opacity: 1;
}


  /* CTA buttons */
  .th-cta{display:flex;align-items:center;gap:12px;}
  .th-btn{
    display:inline-flex; align-items:center; justify-content:center;
    height:44px; padding:0 18px; border-radius:14px;
    border:1px solid var(--th-border);
    background: rgba(0,0,0,.18);
    color: var(--th-text);
    text-decoration:none; font-weight:800;
    transition: border-color .15s, transform .15s, background .15s, box-shadow .15s;
    backdrop-filter: blur(6px);
    gap: 8px;
  }
  .th-btn:hover{ border-color: rgba(255,255,255,.32); box-shadow:0 8px 24px rgba(63,177,206,.25); }
  .th-btn:active{ transform: translateY(1px); }
  
    .th-cta{
    display:flex;
    align-items:center;
    gap:12px;
  }

  /* Circle half-white / half-black theme pill */
  .th-theme{
    margin-left:auto;             /* push it to far right */
    display:inline-flex;
    align-items:center;
    justify-content:center;
    width:40px;
    height:40px;
    border-radius:999px;
    border:1px solid var(--th-border);
    background:transparent;
    padding:0;
    cursor:pointer;
    outline:none;
  }

  /* Sun / moon icon inside the theme toggle */
.th-theme-knob{
  width:22px;
  height:22px;
  border-radius:999px;
  display:flex;
  align-items:center;
  justify-content:center;
  background:transparent;
}

/* Default (dark mode) – moon */
.th-theme-knob::before{
  content:"🌙";
  font-size:15px;
}

/* Light mode – sun */
:root[data-theme="light"] .th-theme-knob::before{
  content:"☀️";
}



  /* Favourites button */
  .th-fav svg {
    width: 20px;
    height: 20px;
  }
  .th-fav:hover svg path {
    fill: #ff4d6d;
    stroke: #ff4d6d;
  }
  .th-fav.has-favs svg path {
    fill: #ff4d6d;
    stroke: #ff4d6d;
  }

  .th-fav-icon-wrap{
    position:relative;
    display:inline-flex;
    align-items:center;
    justify-content:center;
  }
 /* Bigger heart icon (~50% up) */
.th-fav-icon-wrap svg{
  width:30px;
  height:30px;
  display:block;
}


/* Number centered inside larger heart (no bubble) */
.th-fav-count{
  position:absolute;
  inset:0;                    /* same box as the heart */
  display:flex;
  align-items:center;         /* vertical center */
  justify-content:center;     /* geometric center, then nudge left */

  /* nudge slightly left because the heart shape is heavier on the right */
  transform: translateX(-1px);  /* smaller nudge now the heart is symmetrical */

  background:none;
  border:none;
  box-shadow:none;

  font-size:14px;             /* bigger number for bigger heart */
  font-weight:800;
  color:#ffffff;
  text-shadow:0 0 2px rgba(0,0,0,0.9);
  pointer-events:none;
}

  /* Bigger "Favourites" label */
.th-fav-text{
  font-size:1.05rem;
  font-weight:700;
  letter-spacing:.015em;
  color:var(--th-text);
}



  /* Favourites panel */
  .th-fav-panel {
    position: fixed;
    top: 0;
    right: -100%;
    width: min(480px, 90vw);
    max-width: 480px;
    height: 100vh;
    background: var(--th-bg);
    backdrop-filter: blur(12px);
    border-left: 1px solid var(--th-border);
    z-index: 9999;
    transition: right 0.3s ease;
    display: flex;
    flex-direction: column;
    box-shadow: -4px 0 24px rgba(0, 0, 0, 0.5);
  }
  .th-fav-panel.open {
    right: 0;
  }

    .th-fav-panel.th-fav-panel--full{
    left:0;
    right:0;
    width:100vw;
    max-width:none;
    border-left:none;
  }


  .th-fav-panel-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 20px;
    border-bottom: 1px solid var(--th-border);
  }
  .th-fav-panel-title-wrap{
    display:flex;
    align-items:center;
    gap:10px;
    min-width:0;
  }
  .th-fav-panel-title {
    font-size: 1.3rem;
    font-weight: 800;
    color: var(--th-text);
    white-space:nowrap;
  }
  .th-fav-panel-count{
    font-size:0.9rem;
    color:var(--th-dim);
  }
    .th-fav-panel-full-btn{
    border-radius:8px;
    border:1px solid rgba(255,255,255,.28);
    background:rgba(255,255,255,0.03);
    color:var(--th-text);
    font-size:0.85rem;
    padding:6px 12px;
    cursor:pointer;
    white-space:nowrap;
    font-weight:600;
    transition:background .15s,border-color .15s,transform .1s;
  }
  .th-fav-panel-full-btn:hover{
    border-color:rgba(255,255,255,.6);
    background:rgba(255,255,255,0.08);
  }
  .th-fav-panel-full-btn:active{
    transform:translateY(1px);
  }


  .th-fav-panel-close {
    background: none;
    border: none;
    color: var(--th-text);
    font-size: 2rem;
    line-height: 1;
    cursor: pointer;
    padding: 0;
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 8px;
    transition: background 0.2s;
  }
  .th-fav-panel-close:hover {
    background: rgba(255, 255, 255, 0.1);
  }

  .th-fav-panel-body {
    flex: 1 1 auto;
    overflow-y: auto;
    padding: 20px;
  }

  /* Card layout (compact mode = current list style) */
  .th-fav-item {
    background: rgba(22, 28, 34, 0.8);
    border: 1px solid rgba(255, 255, 255, 0.06);
    border-radius: 12px;
    padding: 16px;
    margin-bottom: 12px;
    display: flex;
    gap: 16px;
    align-items: center;
    transition: all 0.2s;
  }
  .th-fav-item:hover {
    border-color: rgba(63, 177, 206, 0.3);
    transform: translateX(-4px);
  }
  .th-fav-item-thumb {
    width: 100px;
    height: 70px;
    border-radius: 8px;
    background: #0f1418 center/cover no-repeat;
    flex-shrink: 0;
  }
  .th-fav-item-info {
    flex: 1 1 auto;
    min-width: 0;
  }
  .th-fav-item-title {
    font-weight: 700;
    font-size: 1.05rem;
    margin-bottom: 4px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  .th-fav-item-meta {
    font-size: 0.9rem;
    opacity: 0.8;
    margin-bottom: 6px;
  }
  .th-fav-item-price {
    font-weight: 700;
    color: #3fb1ce;
    font-size: 1rem;
  }
  .th-fav-item-remove {
    background: rgba(255, 77, 109, 0.1);
    border: 1px solid rgba(255, 77, 109, 0.3);
    color: #ff4d6d;
    border-radius: 8px;
    padding: 8px 12px;
    font-size: 0.9rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
    flex-shrink: 0;
  }
  .th-fav-item-remove:hover {
    background: rgba(255, 77, 109, 0.2);
    border-color: rgba(255, 77, 109, 0.5);
  }

  .th-fav-panel.th-fav-panel--full .th-fav-panel-body{
  display:grid;
  grid-template-columns:repeat(auto-fit, minmax(280px, 360px));
  gap:16px;
  justify-content:center;      /* center 1–2 cards instead of stretching */
  align-content:flex-start;    /* keep them at the top */
  }
  .th-fav-panel.th-fav-panel--full .th-fav-item{
    flex-direction:column;
    align-items:flex-start;
    margin-bottom:0;
  }
  .th-fav-panel.th-fav-panel--full .th-fav-item-thumb{
    width:100%;
    height:160px;
  }
  .th-fav-panel.th-fav-panel--full .th-fav-item-remove{
    margin-top:8px;
  }

  .th-fav-empty {
    text-align: center;
    padding: 40px 20px;
    color: var(--th-dim);
  }
  .th-fav-empty svg {
    width: 64px;
    height: 64px;
    margin: 0 auto 16px;
    opacity: 0.3;
  }
    .th-fav-item-link{
    display:inline-flex;
    margin-top:6px;
    padding:6px 12px;
    border-radius:999px;
    border:1px solid rgba(63,177,206,.6);
    color:var(--th-text);
    font-size:0.85rem;
    font-weight:600;
    text-decoration:none;
    background:rgba(63,177,206,0.08);
    transition:background .15s,border-color .15s,transform .1s;
  }
  .th-fav-item-link:hover{
    background:rgba(63,177,206,0.16);
    border-color:#3FB1CE;
  }
  .th-fav-item-link:active{
    transform:translateY(1px);
  }


  /* Overlay */
  .th-fav-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.7);
    backdrop-filter: blur(4px);
    z-index: 9998;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s ease;
  }
  .th-fav-overlay.active {
    opacity: 1;
    pointer-events: auto;
  }
  
  /* Favourites header layout */
.th-fav-panel-header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
}

.th-fav-header-main{
  display:flex;
  flex-direction:column;
  gap:2px;
}

.th-fav-header-actions{
  display:flex;
  align-items:center;
  gap:8px;
}

/* Big primary toggle: "See full screen" / "See compact" */
.th-fav-view-toggle{
  height:40px;
  padding:0 20px;
  border-radius:999px;
  border:1px solid rgba(63,177,206,0.9);
  background:rgba(15,20,24,0.96);
  color:#e8f0f5;
  font-size:1rem;
  font-weight:750;
  letter-spacing:0.02em;
  text-transform:none;
  cursor:pointer;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  box-shadow:0 8px 20px rgba(0,0,0,0.55);
  transition:
    background 0.15s,
    border-color 0.15s,
    transform 0.12s,
    box-shadow 0.15s;
}

.th-fav-view-toggle:hover{
  background:rgba(26,34,42,1);
  border-color:#3FB1CE;
  transform:translateY(-1px);
  box-shadow:0 10px 26px rgba(63,177,206,0.3);
}

.th-fav-view-toggle:active{
  transform:translateY(0);
  box-shadow:0 5px 14px rgba(0,0,0,0.65);
}

/* When panel is in full-screen mode, make the toggle look "on" */
.th-fav-panel.th-fav-panel--full .th-fav-view-toggle{
  background:#3FB1CE;
  color:#0f1418;
  border-color:#3FB1CE;
}

/* Favourites card structure refinements */
.th-fav-item{
  display:flex;
  gap:16px;
}

.th-fav-panel.th-fav-panel--full .th-fav-item{
  /* in full-screen mode, let them breathe a bit more */
  padding:18px;
}

/* Title + edition */
.th-fav-item-title-wrap{
  text-decoration:none;
  color:inherit;
}

.th-fav-item-title{
  font-weight:700;
  font-size:1.05rem;
  margin-bottom:2px;
}

.th-fav-item-edition{
  font-size:0.9rem;
  opacity:0.9;
}

/* Year • mileage row */
.th-fav-item-meta-row{
  margin-top:4px;
  font-size:0.9rem;
  opacity:0.85;
}

/* Fuel • gearbox row */
.th-fav-item-fg-row{
  margin-top:3px;
  font-size:0.9rem;
  opacity:0.9;
}

/* Price + finance row */
.th-fav-item-price-row{
  margin-top:6px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
}

.th-fav-item-price{
  font-weight:700;
  font-size:1rem;
  color:#3FB1CE;
}

.th-fav-item-finance{
  font-size:0.9rem;
  font-weight:600;
  white-space:nowrap;
  opacity:0.95;
}


  /* Small screens */
  @media (max-width: 640px){
    .th-inner{ gap:12px; padding:10px 0; }
    .th-word{ font-size:1.02rem; letter-spacing:.055em; }
    .th-btn{ height:40px; padding:0 14px; }
    .th-mark{ width:32px; height:32px; }
    .th-fav-text{ display:none; } /* keep header compact on tiny screens */
  }

    @media (min-width: 900px){
    .th-mark { width:62px; height:62px; }
    .th-word { font-size:1.8rem; }
    .th-inner { padding:16px 0; }
  }
  
  /* === FAVOURITES LAYOUT TWEAKS === */

/* Base card layout */
.th-fav-item{
  background: rgba(22, 28, 34, 0.9);
  border: 1px solid rgba(255, 255, 255, 0.06);
  border-radius: 14px;
  padding: 14px;
  margin-bottom: 12px;
  display: flex;
  gap: 14px;
}

/* Compact (slide-in) layout */
.th-fav-panel:not(.th-fav-panel--full) .th-fav-item{
  align-items: center;
}

.th-fav-panel:not(.th-fav-panel--full) .th-fav-item-thumb{
  width: 120px;
  height: 80px;
  border-radius: 10px;
  flex-shrink: 0;
}

.th-fav-panel:not(.th-fav-panel--full) .th-fav-item-info{
  flex: 1 1 auto;
  min-width: 0;
}

/* Hide fuel/gearbox in compact to reduce clutter */
.th-fav-panel:not(.th-fav-panel--full) .th-fav-item-fg-row{
  display: none;
}

/* Put remove inside actions row on the right in compact */
.th-fav-panel:not(.th-fav-panel--full) .th-fav-item-actions{
  margin-top: 8px;
  display: flex;
  justify-content: flex-end;
}

/* Full-screen: grid of big cards */
.th-fav-panel.th-fav-panel--full .th-fav-panel-body{
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
  gap: 18px;
  padding: 20px;
}

.th-fav-panel.th-fav-panel--full .th-fav-item{
  flex-direction: column;
  align-items: stretch;
  padding: 16px;
}

.th-fav-panel.th-fav-panel--full .th-fav-item-thumb{
  width: 100%;
  height: 220px;          /* taller hero image */
  border-radius: 12px;
  margin-bottom: 10px;
}

/* Actions row (view details + remove) */
.th-fav-item-actions{
  margin-top: 10px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
}

/* View details button */
.th-fav-item-details-btn{
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 6px 14px;
  border-radius: 999px;
  border: 1px solid rgba(63,177,206,0.85);
  background: transparent;
  color: #e8f0f5;
  font-size: 0.9rem;
  font-weight: 600;
  text-decoration: none;
  white-space: nowrap;
}

.th-fav-item-details-btn:hover{
  background: rgba(63,177,206,0.12);
}

/* In compact mode you can hide the details button if it's too busy */
.th-fav-panel:not(.th-fav-panel--full) .th-fav-item-details-btn{
  display: none;
}

/* === Fix full-screen favourites layout (no more full-width card) === */

/* Use flex rows instead of a single huge grid column */
.th-fav-panel.th-fav-panel--full .th-fav-panel-body{
  display:flex;
  flex-wrap:wrap;
  gap:18px;
  padding:20px;
}

/* Each card has a reasonable max width */
.th-fav-panel.th-fav-panel--full .th-fav-item{
  flex:0 1 360px;   /* target width ~360px */
  max-width:420px;
  flex-direction:column;
  align-items:stretch;
}

/* Hero image inside the card: bigger, but only as wide as the card */
.th-fav-panel.th-fav-panel--full .th-fav-item-thumb{
  width:100%;
  height:180px;      /* if you want “as it was”, drop this line */
  border-radius:12px;
  margin-bottom:10px;
}

/* Compact slide-in: show "View details" next to Remove */
.th-fav-panel:not(.th-fav-panel--full) .th-fav-item-actions{
  margin-top: 8px;
  display: flex;
  align-items: center;
  justify-content: space-between;  /* details left, remove right */
  gap: 10px;
}

.th-fav-panel:not(.th-fav-panel--full) .th-fav-item-details-btn{
  display: inline-flex;            /* ensure it’s visible in compact */
}
.th-fav-item-finance--fallback{
  color: var(--th-dim);
  font-weight:500;
}
/* Ensure no £ or " / month" are added around fallback finance text anywhere */
.as-finance-inline--fallback::before,
.as-finance-inline--fallback::after,
.th-fav-item-finance--fallback::before,
.th-fav-item-finance--fallback::after{
  content: '' !important;
}

/* In favourites, never add £ or " / month" via pseudo-elements */
.th-fav-item-finance::before,
.th-fav-item-finance::after{
  content: '' !important;
}
/* Favourites: finance placeholder (no £, no "/ month") */
.th-fav-item-finance-placeholder{
  font-size: 0.9rem;
  color: var(--th-dim);
  font-weight: 500;
  white-space: nowrap;
}

/* Just in case any global pseudo rules exist, nuke them */
.th-fav-item-finance-placeholder::before,
.th-fav-item-finance-placeholder::after{
  content: '' !important;
}

/* Mobile: give favourites full-screen view a larger safe-area bottom padding */
@media (max-width: 768px) {
  .th-fav-panel.th-fav-panel--full .th-fav-panel-body{
    padding-bottom: 80px; /* bigger base padding */
    padding-bottom: calc(96px + env(safe-area-inset-bottom)); /* nice big buffer on iOS */
  }
}


  /* Light theme – favourites panel + cards */
  :root[data-theme="light"] .th-fav-panel{
    background:#f4f5f7;
    border-left:1px solid rgba(0,0,0,.06);
    box-shadow:-4px 0 24px rgba(15,20,24,.25);
  }

  /* Full-screen mode keeps same light background */
  :root[data-theme="light"] .th-fav-panel.th-fav-panel--full{
    background:#f4f5f7;
  }

  /* Individual favourite cards */
  :root[data-theme="light"] .th-fav-item{
    background:#ffffff;
    border:1px solid rgba(0,0,0,.08);
    color:#11161b;
  }

  :root[data-theme="light"] .th-fav-item-title{
    color:#11161b;
  }

  :root[data-theme="light"] .th-fav-item-sub,
  :root[data-theme="light"] .th-fav-item-meta{
    color:#5c6b7a;
  }

  /* Thumbnail background so empty images don’t look like dark bricks */
  :root[data-theme="light"] .th-fav-item-thumb{
    background:#dde2e8 center/cover no-repeat;
  }

  /* Header of the favourites panel in light mode */
  :root[data-theme="light"] .th-fav-panel-header{
    background:rgba(255,255,255,.96);
    border-bottom:1px solid rgba(0,0,0,.06);
  }

  /* Light theme – "View details" button in favourites */
  :root[data-theme="light"] .th-fav-item-details-btn{
    background:#3FB1CE;              /* Ticary blue */
    border-color:#3FB1CE;
    color:#ffffff;
  }
  :root[data-theme="light"] .th-fav-item-details-btn:hover{
    filter:brightness(1.05);
  }
  
  /* Mobile – hide the "See full screen / See compact" toggle in favourites */
@media (max-width: 768px){
  .th-fav-panel-full-btn {
    display: none !important;
  }
}

/* =========================================================
   TICARY HEADER – bottom border + right-side grid that fades left
========================================================= */

#tc-header.th-wrap{
  position: relative;
  overflow: hidden;
  isolation: isolate;

  /* theme-aware header surface for solid buttons */
  --tc-head-surface: #0b1220;

  /* accent colour */
  --tc-blue: #3FB1CE;

  /* grid line strength */
  --tc-grid-a-strong: 0.22;
  --tc-grid-a-soft:   0.10;

  /* fade control (how far the grid reaches left) */
  --tc-grid-width: 54%;
}

/* Light theme tweaks */
:root[data-theme="light"] #tc-header.th-wrap{
  --tc-head-surface: #ffffff;
  --tc-grid-a-strong: 0.18;
  --tc-grid-a-soft:   0.08;
}

/* Keep header contents above effects */
#tc-header.th-wrap .th-inner{
  position: relative;
  z-index: 2;
}

/* ---------------------------------------------------------
   1) Ticary bottom border (welds header to page)
--------------------------------------------------------- */
#tc-header.th-wrap{
  border-bottom: 2px solid rgba(63,177,206,0.55) !important;
}
:root[data-theme="light"] #tc-header.th-wrap{
  border-bottom-color: rgba(63,177,206,0.45) !important;
}

/* Optional: a subtle inner shadow line so it looks “built in” */
#tc-header.th-wrap{
  box-shadow: inset 0 -1px 0 rgba(0,0,0,0.12);
}
:root[data-theme="light"] #tc-header.th-wrap{
  box-shadow: inset 0 -1px 0 rgba(0,0,0,0.06);
}

/* ---------------------------------------------------------
   2) Right-side grid texture that fades smoothly left
   (grid only, no weird shapes)
--------------------------------------------------------- */
#tc-header.th-wrap::after{
  content:"";
  position:absolute;
  top:0;
  right:0;
  height:100%;
  width: var(--tc-grid-width);
  pointer-events:none;
  z-index: 1;

  /* “Fancy grid”: two grids + one diagonal micro-line layer */
  background:
    /* vertical grid */
    repeating-linear-gradient(
      90deg,
      rgba(63,177,206,var(--tc-grid-a-soft)) 0px,
      rgba(63,177,206,var(--tc-grid-a-soft)) 1px,
      rgba(0,0,0,0) 1px,
      rgba(0,0,0,0) 22px
    ),
    /* horizontal grid */
    repeating-linear-gradient(
      0deg,
      rgba(63,177,206,var(--tc-grid-a-soft)) 0px,
      rgba(63,177,206,var(--tc-grid-a-soft)) 1px,
      rgba(0,0,0,0) 1px,
      rgba(0,0,0,0) 18px
    ),
    /* subtle diagonal “tech” lines (very light) */
    repeating-linear-gradient(
      -28deg,
      rgba(63,177,206,var(--tc-grid-a-strong)) 0px,
      rgba(63,177,206,var(--tc-grid-a-strong)) 1px,
      rgba(0,0,0,0) 1px,
      rgba(0,0,0,0) 30px
    );

  background-repeat: repeat;
  background-position: right top;

  /* Smooth fade left (this is the ONLY gradient, just for fading) */
  -webkit-mask-image: linear-gradient(to left, #000 62%, transparent 100%);
  mask-image: linear-gradient(to left, #000 62%, transparent 100%);
}

/* Mobile: reduce grid so it stays clean */
@media (max-width: 768px){
  #tc-header.th-wrap{
    border-bottom-width: 2px !important;
  }
  #tc-header.th-wrap::after{
    width: 62%;
    background:
      repeating-linear-gradient(
        90deg,
        rgba(63,177,206,0.10) 0px,
        rgba(63,177,206,0.10) 1px,
        rgba(0,0,0,0) 1px,
        rgba(0,0,0,0) 22px
      ),
      repeating-linear-gradient(
        0deg,
        rgba(63,177,206,0.10) 0px,
        rgba(63,177,206,0.10) 1px,
        rgba(0,0,0,0) 1px,
        rgba(0,0,0,0) 18px
      );
    -webkit-mask-image: linear-gradient(to left, #000 70%, transparent 100%);
    mask-image: linear-gradient(to left, #000 70%, transparent 100%);
  }
}

/* =========================================================
   HEADER BUTTONS – SOLID (no translucency showing through)
   (Include since you said you deleted progress)
========================================================= */

#tc-header :is(a,button)[class*="th-"],
#tc-header :is(a,button)[class*="btn"],
#tc-header :is(a,button)[aria-label*="Fav"],
#tc-header :is(a,button)[aria-label*="Favourite"],
#tc-header :is(a,button)[aria-label*="Home"]{
  background: var(--tc-head-surface) !important;
  opacity: 1 !important;
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
}

#tc-header :is(a,button)[class*="th-"]::before,
#tc-header :is(a,button)[class*="th-"]::after,
#tc-header :is(a,button)[class*="btn"]::before,
#tc-header :is(a,button)[class*="btn"]::after{
  background: transparent !important;
  opacity: 1 !important;
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
}

/* =========================================================
   Theme toggle tooltip – ONLY on hover/focus (hard scoped)
========================================================= */

/* Base hidden state (wins against anything else) */
#tc-header #th-theme-toggle.th-theme::after{
  content: "Dark theme";
  position: absolute;
  left: 50%;
  top: calc(100% + 2px);
  transform: translateX(-50%) translateY(-2px);

  background: #020617;
  color: #e5f0ff;
  padding: 5px 10px;
  border-radius: 999px;
  font-size: 11px;
  font-weight: 700;
  white-space: nowrap;

  opacity: 0 !important;
  visibility: hidden !important;
  pointer-events: none !important;

  box-shadow: 0 10px 25px rgba(0,0,0,0.65);
  transition: opacity .14s ease, transform .14s ease, visibility .14s ease;
  z-index: 99999;
}

/* Light theme text + bubble colour */
:root[data-theme="light"] #tc-header #th-theme-toggle.th-theme::after{
  content: "Light theme";
  background: #ffffff;
  color: #111827;
  box-shadow: 0 10px 25px rgba(15,23,42,0.12);
}

/* Show ONLY when you actually hover/focus the button */
#tc-header #th-theme-toggle.th-theme:hover::after,
#tc-header #th-theme-toggle.th-theme:focus-visible::after{
  opacity: 1 !important;
  visibility: visible !important;
  transform: translateX(-50%) translateY(2px);
}
/* =========================================
   FAV PANEL (COMPACT) – bigger thumb + hide edition
   Paste at END of searchpage - Header embed <style>
========================================= */

/* Hide edition only in compact slide-in */
.th-fav-panel:not(.th-fav-panel--full) .th-fav-item-edition{
  display:none !important;
}

/* Make the thumbnail noticeably bigger in compact */
.th-fav-panel:not(.th-fav-panel--full) .th-fav-item-thumb{
  width: 160px !important;
  height: 104px !important;
  border-radius: 12px !important;
}

/* Give the info column a bit more room */
.th-fav-panel:not(.th-fav-panel--full) .th-fav-item{
  gap: 16px !important;
  padding: 14px 14px !important;
}

/* Optional: tighten vertical spacing since edition is gone */
.th-fav-panel:not(.th-fav-panel--full) .th-fav-item-meta-row{
  margin-top: 2px !important;
}

/* Keep actions row neat in compact */
.th-fav-panel:not(.th-fav-panel--full) .th-fav-item-actions{
  margin-top: 10px !important;
}

/* Auth header links (CSS-driven) */
.tc-login-link{ display: inline-flex; }
.tc-account-link,
.tc-logout-btn{ display: none; }

html.tc-logged-in .tc-login-link{ display: none; }
html.tc-logged-in .tc-account-link,
html.tc-logged-in .tc-logout-btn{ display: inline-flex; }

/* FIX: allow profile dropdown to render outside the header */
#tc-header.th-wrap{
  overflow: visible !important;
}

/* Profile icon button */
.tc-prof-btn{
  width:48px;height:48px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.2);
  background:rgba(255,255,255,.08);
  color:var(--th-text, #fff);
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
}

/* Dropdown items */
.tc-prof-item{
  display:block;
  width:100%;
  padding:10px;
  border-radius:10px;
  background:none;
  border:0;
  color:var(--th-text, #fff);
  font-weight:800;
  text-align:left;
  text-decoration:none;
}
.tc-prof-item:hover{ background:rgba(255,255,255,.08); }
.tc-prof-loading{ opacity:.8; font-weight:700; }

/* MOBILE: hide profile icon (we use the slide-in menu auth links instead) */
@media (max-width: 900px){
  #tc-header .tc-prof-wrap{
    display:none !important;
  }
}

/* =========================================================
   TICARY – Search page: Header hover mega-panels (V2)
   - waits for header/nav
   - BLACK panel in dark theme
   - Ticary blue accent/glow in both themes
========================================================= */

@media (min-width: 900px){

  /* Important: allow dropdown to render outside header */
  #tc-header.th-wrap{
    position: sticky;
    top: 0;
    z-index: 999;
    overflow: visible !important;
  }

  /* Injected container sits under header */
  #tc-header .tc-mega-wrap{
    position: absolute;
    left: 0;
    right: 0;
    top: 100%;
    width: 100%;
    pointer-events: none;
    z-index: 998;
  }

  /* The dropdown panel */
  #tc-header .tc-mega-panel{
    width: min(1180px, 94vw);
    margin: 10px auto 0;

    /* Dark theme: true black */
    background: #000000;

    border: 1px solid rgba(255,255,255,.14);
    border-radius: 18px;

    /* Ticary blue accent */
    border-top: 1px solid rgba(63,177,206,0.55);

    /* Soft glow */
    box-shadow:
      0 30px 70px rgba(0,0,0,.6),
      0 0 0 1px rgba(63,177,206,0.18),
      0 12px 40px rgba(63,177,206,0.22);

    overflow: hidden;

    opacity: 0;
    transform: translateY(10px);
    transition: opacity 160ms ease, transform 180ms ease;
    pointer-events: none;
  }

  /* Light theme: keep white but add blue accent/glow */
  :root[data-theme="light"] #tc-header .tc-mega-panel{
    background: #ffffff;
    border-color: rgba(0,0,0,.08);

    border-top: 1px solid rgba(63,177,206,0.45);

    box-shadow:
      0 26px 60px rgba(15,20,24,.18),
      0 0 0 1px rgba(63,177,206,0.12),
      0 10px 30px rgba(63,177,206,0.18);
  }

  /* Visible state */
  #tc-header.tc-mega-open .tc-mega-panel{
    opacity: 1;
    transform: translateY(0);
    pointer-events: auto;
  }

  /* Placeholder “heycar-ish” columns */
  #tc-header .tc-mega-grid{
    display: grid;
    grid-template-columns: repeat(3, minmax(0, 1fr));
  }

  #tc-header .tc-mega-col{
    padding: 26px 26px 22px;
    min-height: 220px;
  }

  /* Column dividers */
  #tc-header .tc-mega-col + .tc-mega-col{
    border-left: 1px solid rgba(255,255,255,.10);
  }
  :root[data-theme="light"] #tc-header .tc-mega-col + .tc-mega-col{
    border-left-color: rgba(0,0,0,.10);
  }

  /* Headings + placeholder lines */
  #tc-header .tc-mega-title{
    font-size: 1.25rem;
    font-weight: 900;
    margin: 0 0 16px;
    color: var(--th-text, #e8f0f5);
  }
  :root[data-theme="light"] #tc-header .tc-mega-title{ color:#11161b; }

  #tc-header .tc-mega-line{
    height: 12px;
    border-radius: 999px;
    margin: 12px 0;
    width: 78%;
    background: rgba(255,255,255,.10);
  }
  #tc-header .tc-mega-line:nth-child(3){ width:64%; }
  #tc-header .tc-mega-line:nth-child(4){ width:70%; }
  #tc-header .tc-mega-line:nth-child(5){ width:52%; }
  :root[data-theme="light"] #tc-header .tc-mega-line{
    background: rgba(15,20,24,.10);
  }

  #tc-header .tc-mega-viewall{
    display: inline-block;
    margin-top: 16px;
    font-weight: 800;
    color: var(--th-text, #e8f0f5);
    text-decoration: underline;
    text-underline-offset: 3px;
  }
  :root[data-theme="light"] #tc-header .tc-mega-viewall{ color:#11161b; }
}

/* Mobile: HARD disable mega panels (prevents unstyled "View all / FAQ / Best picks") */
@media (max-width: 899px){
  #tc-header .tc-mega-wrap,
  #tc-header .tc-mega-panel{
    display: none !important;
  }
  #tc-header.tc-mega-open{
    /* if JS added the class, this kills any chance of it showing */
    pointer-events: auto !important;
  }
}

/* ================================
   TICARY — Mobile header drawer
   (does not affect desktop)
================================ */

@media (max-width: 900px){
  /* hide the desktop text links */
  #tc-header .tc-header-nav{ display:none !important; }

  /* show burger button */
  #tc-header .tc-mnav-btn{
    display:inline-flex !important;
  }
}

/* Mobile: never show desktop hover dropdown panels */
@media (max-width: 900px){
  /* common dropdown/popup containers (covers your stuck open menu) */
  .th-dd, .th-ddpanel, .th-dropdown, .th-popover, .th-menu, .th-submenu,
  .th-hoverpanel, .th-flyout, .th-nav-drop, .th-nav-panel{
    display:none !important;
    opacity:0 !important;
    visibility:hidden !important;
    pointer-events:none !important;
  }
}


#tc-header .tc-mnav-btn{
  display:none;
  height:44px;
  padding:0 14px;
  border-radius:14px;
  border:1px solid var(--th-border, rgba(255,255,255,.18));
  background:rgba(255,255,255,.09);
  color:var(--th-text, #e8f0f5);
  font-weight:950;
  letter-spacing:.01em;
  align-items:center;
  gap:10px;
  cursor:pointer;
}

:root[data-theme="light"] #tc-header .tc-mnav-btn{
  background:rgba(11,18,32,.04);
  color:rgba(11,18,32,.92);
  border:1px solid rgba(11,18,32,.14);
}

#tc-header .tc-mnav-ico{
  width:18px; height:18px;
  position:relative;
  display:inline-block;
}
#tc-header .tc-mnav-ico::before,
#tc-header .tc-mnav-ico::after,
#tc-header .tc-mnav-ico span{
  content:"";
  position:absolute; left:0; right:0;
  height:2px; border-radius:999px;
  background:currentColor;
}
#tc-header .tc-mnav-ico::before{ top:2px; }
#tc-header .tc-mnav-ico span{ top:8px; }
#tc-header .tc-mnav-ico::after{ top:14px; }

/* overlay */
.tc-mnav-overlay{
  position:fixed; inset:0;
  background:rgba(0,0,0,.55);
  display:none;
  z-index:2147482000;
}
.tc-mnav-overlay.is-open{ display:block; }

/* drawer */
.tc-mnav-drawer{
  position:fixed;
  top:0; right:0;
  height:100vh;
  width:min(360px, 86vw);
  background:rgba(14,18,24,.98);
  border-left:1px solid rgba(255,255,255,.12);
  box-shadow:-30px 0 90px rgba(0,0,0,.55);
  transform:translateX(110%);
  transition:transform 220ms ease;
  z-index:2147482100;
  padding:18px 16px;
}

:root[data-theme="light"] .tc-mnav-drawer{
  background:rgba(255,255,255,.98);
  border-left:1px solid rgba(11,18,32,.12);
  box-shadow:-30px 0 90px rgba(11,18,32,.18);
}

.tc-mnav-drawer.is-open{ transform:translateX(0); }

.tc-mnav-top{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  margin-bottom:14px;
}
.tc-mnav-title{
  font-weight:950;
  font-size:14px;
  letter-spacing:.08em;
  opacity:.85;
}

.tc-mnav-close{
  width:40px; height:40px;
  border-radius:12px;
  border:1px solid rgba(63,177,206,.55);
  background:#3fb1ce;
  color:#fff;
  font-weight:950;
  cursor:pointer;
}

.tc-mnav-links{
  display:flex;
  flex-direction:column;
  gap:10px;
  margin-top:10px;
}

.tc-mnav-links a{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:12px 12px;
  border-radius:14px;
  text-decoration:none;
  font-weight:900;
  color:var(--th-text, #e8f0f5);
  background:rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.10);
}

:root[data-theme="light"] .tc-mnav-links a{
  color:rgba(11,18,32,.92);
  background:rgba(11,18,32,.04);
  border:1px solid rgba(11,18,32,.10);
}

/* Mobile: hide the header home button/link (logo remains) */
@media (max-width: 900px){
  #tc-header :is(a,button)[aria-label*="Home"],
  #tc-header :is(a,button)[href*="old-home"]:not(.th-logo){
    display: none !important;
  }
}

/* FORCE HIDE OLD ELEMENTS */
.asq-wrap, .searchbar, [data-searchbar],
.as-listbar:not(.as-listbar-new) { 
  display: none !important; 
}

#asf-search, .asf-sec#asf-search { display: none !important; }

/* Remove sticky from filters */
.as-filter, .as-filters, #as-filters, .ds-filters { 
  position: static !important; 
  top: auto !important;
  overflow: visible !important;
  max-height: none !important;
}

/* =========================================================
   Layout controls – animated (desktop)
   Replaces the old display:none layout controls block
========================================================= */

@media (min-width: 769px){

  /* Animate the grid columns so main never drops under */
  .as-grid{
    transition: grid-template-columns 280ms cubic-bezier(.2,.8,.2,1);
    grid-template-columns: 360px 1fr;  /* filters width, tweak if needed */
  }
  body.as-no-filters .as-grid{
    grid-template-columns: 0px 1fr;
  }

  /* Lock placement */
  .as-col--filters{ grid-column: 1 !important; grid-row: 1 !important; }
  #as-main, .as-main{ grid-column: 2 !important; grid-row: 1 !important; }

  /* Keep filters in DOM (so it can animate) */
  body.as-no-filters .as-col--filters,
  body.as-no-filters .as-filter{
    display: block !important;
  }

  /* Panel fade/slide for premium feel */
  .as-filter{
    will-change: opacity, transform;
    transition: opacity 220ms cubic-bezier(.2,.8,.2,1),
                transform 280ms cubic-bezier(.2,.8,.2,1);
    opacity: 1;
    transform: translateX(0);
  }
  body.as-no-filters .as-filter{
    opacity: 0;
    transform: translateX(-10px);
    pointer-events: none;
  }
}

@media (prefers-reduced-motion: reduce){
  .as-grid, .as-filter{ transition: none !important; }
}


/* Mobile filters drawer – match favourites panel behaviour */
@media (max-width: 768px) {
  /* Lock page behind the drawer */
  html body.as-mobile-filters-open {
    overflow: hidden;
  }

  /* Header bar inside the drawer (hidden by default) */
  .asf-mobile-head {
    display: none;
  }

  /* Outer panel: fixed full-screen, no scroll (like .th-fav-panel) */
  body.as-mobile-filters-open #as-filters {
    position: fixed !important;
    inset: 0;
    z-index: 999;
    background: var(--as-bg);   /* theme-aware */
    padding: 10px 12px 16px;
    display: flex;
    flex-direction: column;
    overflow: hidden;           /* body below handles the scroll */
  }

  /* Inner body: scrollable column (like .th-fav-panel-body) */
  body.as-mobile-filters-open #as-filters-body {
    position: static !important;
    flex: 1 1 auto;
    margin: 0;
    padding: 0;
    max-width: 100vw;
    width: 100vw;

    overflow-y: auto;
    overflow-x: hidden;
    -webkit-overflow-scrolling: touch;
    touch-action: pan-y;        /* vertical only */
  }

  body.as-mobile-filters-open .as-col--filters {
    max-width: 100vw !important;
    width: 100vw !important;
  }

  /* Show the mobile header only in drawer mode */
  body.as-mobile-filters-open .asf-mobile-head {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 8px 2px 10px;
    position: sticky;
    top: 0;
    z-index: 2;
    background: var(--as-panel);
    border-bottom: 1px solid rgba(0,0,0,0.15);
    color: var(--as-text);
  }

  .asf-mobile-title {
    font-size: 1rem;
    font-weight: 600;
  }

  .asf-mobile-close {
    border-radius: 999px;
    border: 1px solid rgba(0,0,0,0.15);
    padding: 6px 14px;
    background: var(--as-panel);
    color: var(--as-text);
    font-size: 0.9rem;
    cursor: pointer;
  }
}


/* --- Mobile filters: kill sideways dragging & horizontal scroll --- */
@media (max-width: 768px){
  body.as-mobile-filters-open #as-filters,
  body.as-mobile-filters-open #as-filters-body{
    max-width: 100vw;
    width: 100vw;
    overflow-x: hidden;
    touch-action: pan-y;   /* only vertical scrolling */
  }

  body.as-mobile-filters-open .as-col--filters{
    max-width: 100vw;
    width: 100vw;
  }
}
/* --- Mobile filters header: light theme styling --- */
@media (max-width: 768px){
  :root[data-theme="light"] body.as-mobile-filters-open #as-filters,
  :root[data-theme="light"] body.as-mobile-filters-open #as-filters-body{
    background: #f4f5f7;
  }

  :root[data-theme="light"] body.as-mobile-filters-open .asf-mobile-head{
    background: #ffffff;
    color: #11161b;
    border-bottom: 1px solid rgba(0,0,0,0.08);
  }

  :root[data-theme="light"] body.as-mobile-filters-open .asf-mobile-title{
    color: #11161b;
  }

  :root[data-theme="light"] body.as-mobile-filters-open .asf-mobile-close{
    background: #ffffff;
    color: #11161b;
    border-color: rgba(0,0,0,0.15);
  }
}


body.as-no-map .as-mapwrap { 
  display: none !important; 
}

:root { 
  --as-pin: #3FB1CE;
  --as-pop-w: 280px;
}

/* Grid */
[data-as-grid="1"] { 
  display: grid !important; 
  grid-template-columns: repeat(2, minmax(0, 1fr)); 
  gap: clamp(14px, 1.8vw, 18px); 
}
@media (min-width: 960px) { 
  [data-as-grid="1"] { 
    grid-template-columns: repeat(3, minmax(0, 1fr)); 
  } 
}
@media (min-width: 1600px) { 
  [data-as-grid="1"] { 
    grid-template-columns: repeat(4, minmax(0, 1fr)); 
  } 
}

/* Map container (visuals only – animation handled later) */
.as-mapwrap{
  background: #0b0f14;
  border: 1px solid rgba(255,255,255,.08);
  border-radius: 0;               /* keep “slotted” look */
  margin: 0 !important;           /* no gaps */
}

#as-map {
  width: 100%;
  height: clamp(420px, 52vh, 680px);
  position: relative;
}

/* Map pins */
.as-pin {
  display: flex;
  align-items: center;
  justify-content: center;
  min-width: 32px;
  height: 32px;
  padding: 0 8px;
  border-radius: 16px;
  background: var(--as-pin);
  border: 2px solid #fff;
  color: #fff;
  font: 700 13px/1 system-ui;
  cursor: pointer;
  box-shadow: 0 3px 12px rgba(0,0,0,.4);
  transition: transform .2s cubic-bezier(0.34, 1.56, 0.64, 1);
  will-change: transform;
}
.as-pin:hover {
  transform: scale(1.2);
  z-index: 10;
}
.as-pin--single {
  min-width: 28px;
  width: 28px;
  height: 28px;
  padding: 0;
  font-size: 0;
}

/* Map popup */
.mapboxgl-popup {
  max-width: var(--as-pop-w);
}
.mapboxgl-popup-content {
  width: var(--as-pop-w);
  padding: 0;
  background: #161c22;
  color: #e8f0f5;
  border: 1px solid rgba(255,255,255,.14);
  border-radius: 12px;
  box-shadow: 0 12px 36px rgba(0,0,0,.5);
}
.mapboxgl-popup-close-button {
  color: #cfd9e3;
  font-size: 18px;
  padding: 8px 10px;
  opacity: 0.9;
}

.as-pop {
  display: flex;
  flex-direction: column;
}
.as-pop-thumb {
  position: relative;
  width: 100%;
  aspect-ratio: 3/2;
  background: #0f1418 center/cover no-repeat;
  border-radius: 12px 12px 0 0;
}
.as-pop-price {
  position: absolute;
  top: 8px;
  left: 8px;
  padding: 6px 10px;
  border-radius: 20px;
  background: rgba(0,0,0,.7);
  backdrop-filter: blur(4px);
  border: 1px solid rgba(255,255,255,.25);
  font-weight: 800;
  font-size: 0.9rem;
  color: #fff;
}
.as-pop-ind {
  position: absolute;
  bottom: 8px;
  right: 8px;
  padding: 4px 8px;
  border-radius: 12px;
  background: rgba(0,0,0,.6);
  backdrop-filter: blur(4px);
  border: 1px solid rgba(255,255,255,.2);
  font-size: 0.8rem;
  color: #fff;
  opacity: 0.95;
}
.as-pop-nav {
  position: absolute;
  top: 50%;
  left: 6px;
  right: 6px;
  display: flex;
  justify-content: space-between;
  transform: translateY(-50%);
  pointer-events: none;
  z-index: 10;
}
.as-pop-btn {
  pointer-events: auto;
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  background: rgba(0,0,0,.7);
  backdrop-filter: blur(4px);
  border: 1px solid rgba(255,255,255,.3);
  color: #fff;
  font-size: 18px;
  line-height: 1;
  cursor: pointer;
  transition: all .15s;
}
.as-pop-btn:hover {
  background: rgba(0,0,0,.85);
  transform: scale(1.1);
}
.as-pop-btn:disabled {
  opacity: 0.3;
  cursor: not-allowed;
}

.as-pop-body {
  padding: 12px;
  display: flex;
  flex-direction: column;
  gap: 6px;
}
.as-pop-title {
  font-weight: 800;
  font-size: 1rem;
  line-height: 1.3;
}
.as-pop-meta {
  opacity: 0.9;
  font-size: 0.88rem;
}
.as-pop-specs {
  font-size: 0.85rem;
  opacity: 0.85;
}
.as-pop-actions {
  display: flex;
  gap: 8px;
  margin-top: 6px;
}
.as-pop-view {
  flex: 1;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  height: 36px;
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,.18);
  background: rgba(0,0,0,.2);
  color: #e8f0f5;
  text-decoration: none;
  font-size: 0.9rem;
  font-weight: 600;
}
.as-pop-view:hover {
  border-color: var(--as-pin);
  background: rgba(63,177,206,.15);
}
.as-pop-heart {
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,.18);
  background: rgba(0,0,0,.2);
  cursor: pointer;
}
.as-pop-heart:hover {
  border-color: rgba(255,255,255,.35);
}
.as-pop-heart svg {
  width: 18px;
  height: 18px;
}
.as-pop-heart svg path {
  fill: none;
  stroke: #fff;
  stroke-width: 2;
}
.as-pop-heart[aria-pressed="true"] svg path {
  fill: #ff4d6d;
  stroke: #ff4d6d;
}

/* Toolbar */
.as-listbar-new {
  display: flex;
  align-items: center;
  justify-content: space-between;
  flex-wrap: wrap;
  gap: 12px;
  margin: 0 0 16px;
  padding: 14px 18px;
  background: #11161b;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,.08);
  position: sticky;
  top: 0;
  z-index: 50;
  backdrop-filter: blur(10px);
}
.as-listbar-left {
  display: flex;
  align-items: center;
  gap: 12px;
  flex: 1;
  flex-wrap: wrap;
}
.as-listbar-right {
  display: flex;
  align-items: center;
  gap: 10px;
  flex-wrap: wrap;
}

/* Filter tags in toolbar */
.as-filter-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  margin-left: 8px;
}
.as-filter-tag {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 5px 10px;
  border-radius: 8px;
  font-size: 0.82rem;
  background: rgba(63,177,206,.15);
  border: 1px solid rgba(63,177,206,.35);
  color: var(--as-pin);
  font-weight: 600;
  line-height: 1.2;
}
.as-filter-tag button {
  width: 14px;
  height: 14px;
  padding: 0;
  border: none;
  background: none;
  color: inherit;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.1rem;
  line-height: 1;
  opacity: 0.8;
}
.as-filter-tag button:hover {
  opacity: 1;
}

#as-sort-new {
  padding: 0 46px 0 16px;
  height: 48px;
  font-size: 1rem;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,.18);
  background: var(--as-pin);
  color: #fff;
  font-weight: 600;
  cursor: pointer;
  -webkit-appearance: none;
  appearance: none;
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23ffffff' stroke-width='2'><path d='M6 9l6 6 6-6'/></svg>");
  background-repeat: no-repeat;
  background-position: right 14px center;
  background-size: 16px;
}
#as-sort-new option {
  color: #0A0E12;
}

.as-ctrl-new {
  height: 48px;
  padding: 0 20px;
  font-size: 0.95rem;
  font-weight: 700;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,.18);
  background: var(--as-pin);
  color: #fff;
  cursor: pointer;
  white-space: nowrap;
}
.as-ctrl-new:hover {
  filter: brightness(1.1);
}

/* Cards */
.as-card {
  background: #161c22;
  border-radius: 16px;
  overflow: hidden;
  border: 1px solid rgba(255,255,255,.06);
  display: flex;
  flex-direction: column;
  position: relative;
  transition: transform .18s, box-shadow .18s;
}
.as-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 14px 36px rgba(0,0,0,.35);
}
.as-link {
  position: relative;
  display: block;
  color: inherit;
  text-decoration: none;
}
.as-thumb {
  display: block;
  width: 100%;
  aspect-ratio: 16/10;
  background: #0f1418 center/cover no-repeat;
}
.as-price-badge {
  position: absolute;
  top: 10px;
  left: 10px;
  padding: 6px 12px;
  border-radius: 10px;
  background: rgba(16,22,29,.92);
  backdrop-filter: blur(6px);
  border: 1px solid var(--as-pin);
  font-weight: 800;
  font-size: 0.95rem;
  color: #e8f0f5;
}
.as-body {
  display: flex;
  flex-direction: column;
  padding: 14px;
  gap: 8px;
  flex: 1;
}
.as-title {
  display: flex;
  align-items: baseline;
  gap: 0.35em;
  white-space: nowrap;
  min-width: 0;
}
.as-make {
  font-weight: 800;
  font-size: 1.05rem;
  flex-shrink: 0;
}
.as-model {
  font-weight: 700;
  font-size: 1.05rem;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}
.as-meta {
  opacity: 0.9;
  font-size: 0.92rem;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.as-cta {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 10px 12px;
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,.12);
  text-decoration: none;
  color: #e8f0f5;
  margin-top: auto;
  font-size: 0.9rem;
  font-weight: 600;
}
.as-cta:hover {
  border-color: var(--as-pin);
  background: rgba(63,177,206,.1);
}

/* Heart button */
.as-fav-btn {
  position: absolute;
  top: 10px;
  right: 10px;
  width: 38px;
  height: 38px;
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,.18);
  background: rgba(0,0,0,.25);
  backdrop-filter: blur(4px);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 5;
}
.as-fav-btn:hover {
  border-color: rgba(255,255,255,.35);
  transform: scale(1.05);
}
.as-fav-btn svg {
  width: 18px;
  height: 18px;
}
.as-fav-btn svg path {
  fill: none;
  stroke: #fff;
  stroke-width: 2;
}
.as-fav-btn[aria-pressed="true"] svg path {
  fill: #ff4d6d;
  stroke: #ff4d6d;
}

/* No results - FIXED icon size */
.as-no-results {
  text-align: center;
  padding: 80px 20px;
  color: #c9d3dc;
  background: #161c22;
  border-radius: 16px;
  border: 1px solid rgba(255,255,255,.06);
  grid-column: 1/-1;
}
.as-no-results svg {
  width: 48px;
  height: 48px;
  margin: 0 auto 16px;
  opacity: 0.5;
}
.as-no-results h3 {
  font-size: 1.5rem;
  margin: 0 0 8px;
}
.as-no-results p {
  margin: 0;
  opacity: 0.8;
  font-size: 0.95rem;
}

/* More button */
#as-more {
  display: block;
  width: fit-content !important;
  padding: 14px 28px;
  margin: 20px auto 32px;
  border-radius: 14px;
  background: var(--as-pin) !important;
  color: #fff !important;
  font-weight: 800;
  cursor: pointer;
}

/* FILTERS - EXACT ORIGINAL STRUCTURE */
.asf { 
  display: flex; 
  flex-direction: column; 
  gap: 14px; 
}
.asf-sec { 
  border: 1px solid rgba(255,255,255,.06); 
  border-radius: 14px; 
  background: #11161b; 
  overflow: hidden; 
}
.asf-sec > header { 
  display: flex; 
  align-items: center; 
  justify-content: space-between; 
  padding: 14px 16px; 
  cursor: pointer;
  user-select: none;
}
.asf-sec > header h5 { 
  margin: 0; 
  font-size: 1rem; 
  font-weight: 800; 
}
.chev { 
  width: 18px; 
  height: 18px; 
  position: relative;
  flex-shrink: 0;
}
.chev:before, .chev:after { 
  content: ""; 
  position: absolute; 
  inset: 0; 
  margin: auto; 
  width: 10px; 
  height: 2px; 
  background: #e8f0f5; 
  border-radius: 1px; 
  transition: transform .18s; 
}
.chev:after { 
  transform: rotate(90deg); 
}
.asf-sec[data-open="true"] .chev:after { 
  transform: rotate(0); 
}
.asf-body { 
  display: none; 
  padding: 14px 16px 18px; 
}
.asf-sec[data-open="true"] .asf-body { 
  display: block; 
}
.row { 
  display: flex; 
  flex-direction: column; 
  gap: 8px; 
  margin-bottom: 12px; 
}
.row:last-child { 
  margin-bottom: 0; 
}
.row label { 
  font-size: 0.9rem; 
  font-weight: 600; 
  opacity: 0.85; 
}
.asf select, 
.asf input[type="number"], 
.asf input[type="text"] {
  width: 100%; 
  height: 42px; 
  border-radius: 12px; 
  border: 1px solid rgba(255,255,255,.15);
  background: #0f1418; 
  color: #e8f0f5; 
  padding: 0 12px; 
  outline: none; 
  font-size: 0.95rem;
}
.asf select:disabled, 
.asf input:disabled { 
  opacity: 0.5; 
  cursor: not-allowed; 
}
.asf select:focus, 
.asf input:focus { 
  border-color: rgba(63,177,206,.5); 
}
.grid-2 { 
  display: grid; 
  grid-template-columns: 1fr 1fr; 
  gap: 8px; 
}
.btnbar { 
  display: flex; 
  gap: 8px; 
  flex-wrap: wrap; 
}
.btnbar .btn {
  flex: 1;
  min-width: 100px;
  height: 42px;
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,.18);
  background: rgba(0,0,0,.15);
  color: #e8f0f5;
  font-weight: 700;
  cursor: pointer;
  font-size: 0.95rem;
}
.btn.apply {
  background: var(--as-pin) !important;
  color: #fff !important;
  border-color: rgba(0,0,0,.12);
}
.btn:hover {
  filter: brightness(1.1);
}
.help { 
  font-size: 0.85rem; 
  opacity: 0.8; 
  margin-top: 6px; 
}

input[type="range"] {
  width: 100%;
  height: 6px;
  border-radius: 3px;
  background: rgba(255,255,255,.12);
  -webkit-appearance: none;
  appearance: none;
  margin: 8px 0;
  cursor: pointer;
}
input[type="range"]::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: var(--as-pin);
  cursor: pointer;
  border: 2px solid #fff;
}
input[type="range"]::-moz-range-thumb {
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: var(--as-pin);
  cursor: pointer;
  border: 2px solid #fff;
}

/* === HARD OVERRIDE: mobile filters drawer behaves like favourites === */
@media (max-width: 768px) {

  /* Lock the page behind the drawer */
  html body.as-mobile-filters-open {
    overflow: hidden !important;
  }

  /* OUTER PANEL: fixed full-screen shell, no scrolling */
  body.as-mobile-filters-open #as-filters {
    position: fixed !important;
    inset: 0 !important;
    z-index: 999 !important;

    display: flex !important;
    flex-direction: column !important;

    padding: 10px 12px 16px !important;
    background: var(--as-bg) !important;

    overflow: hidden !important;          /* body inside handles scroll */
    max-width: 100vw !important;
    width: 100vw !important;
  }

  /* INNER BODY: the only thing that scrolls (like favourites body) */
  body.as-mobile-filters-open #as-filters-body {
    position: static !important;
    flex: 1 1 auto !important;

    margin: 0 !important;
    padding: 0 !important;
    max-width: 100vw !important;
    width: 100vw !important;

    overflow-y: auto !important;
    overflow-x: hidden !important;
    -webkit-overflow-scrolling: touch;
    touch-action: pan-y !important;       /* vertical only */
  }

  /* Make sure the filters column can’t overflow horizontally */
  body.as-mobile-filters-open .as-col--filters {
    max-width: 100vw !important;
    width: 100vw !important;
  }
}

/* =========================================================
   Map open/close – smooth slide + flicker mask (desktop)
========================================================= */

@media (min-width: 769px){

  .as-mapwrap{
    display: block !important;
    overflow: hidden !important;
    position: relative !important;

    will-change: max-height, opacity, transform;
    transition:
      max-height 320ms cubic-bezier(.2,.8,.2,1),
      opacity    220ms cubic-bezier(.2,.8,.2,1),
      transform  320ms cubic-bezier(.2,.8,.2,1);

    max-height: 1200px;         /* open cap */
    opacity: 1;
    transform: translateY(0);
  }

  body.as-no-map .as-mapwrap{
  display: block !important;
  max-height: 0px !important;
  opacity: 0;
  transform: translateY(-10px);
  pointer-events: none;
}


  /* Flicker mask (only while JS adds body.tc-map-mask) */
  .as-mapwrap::after{
    content:"";
    position:absolute;
    inset:0;
    background: #0b1220 !important;
    opacity: 0;
    pointer-events:none;
    transition: opacity 120ms ease;
    z-index: 5;
  }
 
 /* Light theme: force mask to white (only when mask is active) */
:root[data-theme="light"] body.tc-map-mask .as-mapwrap::after{
  background: #ffffff !important;
}

  body.tc-map-mask .as-mapwrap::after{ opacity: 1; }

  /* Optional: hide map while masked (prevents seeing a black frame) */
  body.tc-map-mask #as-map{ opacity: 0; transition: opacity 120ms ease; }
  body:not(.tc-map-mask) #as-map{ opacity: 1; transition: opacity 120ms ease; }
}

@media (prefers-reduced-motion: reduce){
  .as-mapwrap, .as-mapwrap::after, #as-map{ transition: none !important; }
}


/* =========================================================
   Remove stray divider line between MAP and TOOLBAR
========================================================= */

/* Kill any bottom border/shadow on the map container */
.as-mapwrap{
  border-bottom: 0 !important;
  box-shadow: none !important;
}

/* In case the actual map element has a border */
#as-map,
#as-map *{
  border-bottom: 0 !important;
}

/* If the divider is coming from a generic "panel" rule */
.as-mapwrap + .as-listbar-new{
  border-top: 0 !important;
}

/* =========================================================
   RESULTS: inner padding + tighter spacing + rounded cards
   (Targets the REAL container: #vehiclesList)
========================================================= */

/* Add inner padding so the grid isn’t flush to edges */
#vehiclesList{
  padding: 14px !important;
  box-sizing: border-box !important;
}

/* Keep the grid columns exactly as-is, just tighten gap a touch */
#vehiclesList[data-as-grid="1"]{
  gap: 12px !important;          /* was clamp(14px..18px) */
  row-gap: 12px !important;
  column-gap: 12px !important;
}

/* Rounded cards back (your preferred look) */
#vehiclesList .as-card{
  border-radius: 16px !important;
  overflow: hidden !important;
}

/* Mobile: slightly smaller gutter */
@media (max-width: 768px){
  #vehiclesList{
    padding: 12px !important;
  }
  #vehiclesList[data-as-grid="1"]{
    gap: 10px !important;
  }
}

/* =========================================================
   TICARY FILTERS – flat rows + dividers + darker body only
   (clean version: no duplicate overrides)
========================================================= */

/* Remove outer gutter around filters column */
.as-col--filters,
#as-filters,
.as-filter{
  padding: 0 !important;
  margin: 0 !important;
  border-radius: 0 !important;
}

/* Stack: no gaps */
.asf{ gap: 0 !important; }

/* Section rows: no card look, just dividers */
.asf-sec{
  border: 0 !important;
  border-radius: 0 !important;
  background: transparent !important;
  overflow: visible !important;

  border-bottom: 1px solid rgba(255,255,255,.08) !important;
}
.asf-sec:first-child{
  border-top: 1px solid rgba(255,255,255,.08) !important;
}
:root[data-theme="light"] .asf-sec{
  border-bottom-color: rgba(0,0,0,.10) !important;
}
:root[data-theme="light"] .asf-sec:first-child{
  border-top-color: rgba(0,0,0,.10) !important;
}

/* Header row: consistent background always (NO darken on open) */
.asf-sec > header{
  padding: 16px 16px !important;
  border-radius: 0 !important;
  background: #11161b !important;
}
:root[data-theme="light"] .asf-sec > header{
  background: #ffffff !important;
  color: #11161b !important;
}

/* Make sure the section wrapper never “tints” when open */
.asf-sec[data-open="true"]{
  background: transparent !important;
  filter: none !important;
  opacity: 1 !important;
}

/* Header label sizing + layout */
.asf-sec > header h5{
  margin: 0 !important;
  display: inline-flex !important;
  align-items: center !important;
  gap: 10px !important;

  font-size: 1.12rem !important;   /* bigger Distance/Vehicle/Year etc */
  font-weight: 850 !important;
  letter-spacing: -0.01em;
}

/* Plus/minus icon in light theme */
:root[data-theme="light"] .chev:before,
:root[data-theme="light"] .chev:after{
  background: #11161b !important;
}

/* Body: ONLY this area gets darker “box” background */
.asf-body{
  display: none;
  padding: 12px 14px 16px !important;

  background: #0f1418 !important;
  border-top: 1px solid rgba(255,255,255,.08) !important;
  box-shadow: inset 0 1px 0 rgba(255,255,255,.04);
}
.asf-sec[data-open="true"] .asf-body{ display: block; }

:root[data-theme="light"] .asf-body{
  background: #f4f5f7 !important;
  border-top-color: rgba(0,0,0,.10) !important;
  box-shadow: inset 0 1px 0 rgba(0,0,0,.03);
}

/* =========================================================
   Header icons (IDs you gave: asf-distance etc.)
========================================================= */

/* Icon slot */
.asf-sec > header h5::before{
  content:"";
  width: 18px;
  height: 18px;
  display: inline-block;
  flex: 0 0 18px;
  background-repeat: no-repeat;
  background-size: 18px 18px;
  background-position: center;
  opacity: .95;
}

/* Distance (pin) – keep yours (it’s fine) */
#asf-distance h5::before{
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23e8f0f5' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><path d='M12 22s6-4 6-11a6 6 0 1 0-12 0c0 7 6 11 6 11z'/><path d='M12 11a2 2 0 1 0 0-4 2 2 0 0 0 0 4z'/></svg>");
}
:root[data-theme="light"] #asf-distance h5::before{
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%2311161b' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><path d='M12 22s6-4 6-11a6 6 0 1 0-12 0c0 7 6 11 6 11z'/><path d='M12 11a2 2 0 1 0 0-4 2 2 0 0 0 0 4z'/></svg>");
}

/* Vehicle (car) – cleaner outline */
#asf-vehicle h5::before{
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23e8f0f5' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><path d='M6.5 16.5h11'/><path d='M5 16l1.6-5.2A3 3 0 0 1 9.5 8.8h5A3 3 0 0 1 17.4 10.8L19 16'/><path d='M6 16v2'/><path d='M18 16v2'/><circle cx='8' cy='18' r='1.5'/><circle cx='16' cy='18' r='1.5'/></svg>");
}
:root[data-theme="light"] #asf-vehicle h5::before{
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%2311161b' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><path d='M6.5 16.5h11'/><path d='M5 16l1.6-5.2A3 3 0 0 1 9.5 8.8h5A3 3 0 0 1 17.4 10.8L19 16'/><path d='M6 16v2'/><path d='M18 16v2'/><circle cx='8' cy='18' r='1.5'/><circle cx='16' cy='18' r='1.5'/></svg>");
}

/* Year */
#asf-year h5::before{
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23e8f0f5' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><rect x='3' y='5' width='18' height='16' rx='2'/><path d='M16 3v4M8 3v4M3 9h18'/></svg>");
}
:root[data-theme="light"] #asf-year h5::before{
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%2311161b' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><rect x='3' y='5' width='18' height='16' rx='2'/><path d='M16 3v4M8 3v4M3 9h18'/></svg>");
}

/* Price */
#asf-price h5::before{
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23e8f0f5' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><path d='M8 20h10'/><path d='M10 20V7a4 4 0 0 1 4-4h2'/><path d='M8 12h8'/></svg>");
}
:root[data-theme="light"] #asf-price h5::before{
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%2311161b' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><path d='M8 20h10'/><path d='M10 20V7a4 4 0 0 1 4-4h2'/><path d='M8 12h8'/></svg>");
}

/* Mileage */
#asf-mileage h5::before{
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23e8f0f5' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><path d='M20 13a8 8 0 1 0-16 0'/><path d='M12 13l4-4'/><path d='M6 19h12'/></svg>");
}
:root[data-theme="light"] #asf-mileage h5::before{
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%2311161b' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><path d='M20 13a8 8 0 1 0-16 0'/><path d='M12 13l4-4'/><path d='M6 19h12'/></svg>");
}

/* =========================================================
   KILL FILTER COLUMN INSET (outer padding returned)
========================================================= */

/* The actual column wrapper that creates the inset */
.as-col--filters{
  padding: 0 !important;
}

/* Common inner wrappers in your layout */
.as-col--filters > div,
.as-col--filters > section,
.as-col--filters .w-embed,
.as-col--filters .w-richtext,
.as-col--filters .w-dyn-list{
  padding: 0 !important;
  margin: 0 !important;
}

/* If the grid itself is introducing spacing between columns */
.as-grid{
  column-gap: 0 !important;
  gap: 0 !important;           /* keeps filters flush to map */
}

/* =========================================================
   FILTERS – remove the outer inset padding (working set)
========================================================= */

/* Hit the column + the main filters containers */
.as-grid .as-col--filters,
.as-col--filters,
#as-filters,
.as-filter,
.asf{
  padding: 0 !important;
  margin: 0 !important;
  border-radius: 0 !important;
}

/* The wrapper that usually causes the “inset” */
#as-filters-body,
.asf-body-wrap,
.as-filter-inner{
  padding: 0 !important;
  margin: 0 !important;
}

/* Sometimes Webflow wraps embeds with padding/margins */
.as-col--filters .w-embed{
  padding: 0 !important;
  margin: 0 !important;
}

/* =========================================================
   TOOLBAR – results count emphasis (hard-target)
========================================================= */

.as-listbar-new .as-count-new,
.as-listbar-new #as-count-new,
.as-listbar-new [id="as-count-new"],
.as-listbar-new [class*="as-count"]{
  font-size: 1.15rem !important;
  font-weight: 900 !important;
  line-height: 1.1 !important;
  letter-spacing: -0.01em !important;
}

/* If the number is inside a child span */
.as-listbar-new .as-count-new span,
.as-listbar-new #as-count-new span{
  font-size: 1.25rem !important;
  font-weight: 900 !important;
}

/* Theme colors */
.as-listbar-new .as-count-new,
.as-listbar-new #as-count-new{
  color: #ffffff !important;
}
:root[data-theme="light"] .as-listbar-new .as-count-new,
:root[data-theme="light"] .as-listbar-new #as-count-new{
  color: #11161b !important;
}

/* =========================================================
   HEADER – editorial text navigation (non-button)
========================================================= */

.tc-header-nav{
  display: flex;
  align-items: center;
  gap: 64px;        /* more breathing room between links */
  margin-left: 40px; /* a bit more space from the logo */
}

/* Links */
.tc-nav-link{
  position: relative;
  font-size: 0.95rem;
  font-weight: 600;
  color: #cfd9e3;
  text-decoration: none;
  white-space: nowrap;
  letter-spacing: -0.01em;
  transition: color .15s ease;
}

/* Subtle underline on hover (not button-y) */
.tc-nav-link::after{
  content:"";
  position:absolute;
  left:0;
  right:0;
  bottom:-4px;
  height:2px;
  background: #3FB1CE; /* Ticary blue */
  opacity: 0;
  transform: scaleX(0.6);
  transition: opacity .15s ease, transform .15s ease;
}

.tc-nav-link:hover{
  color: #ffffff;
}
.tc-nav-link:hover::after{
  opacity: .35;
  transform: scaleX(1);
}

/* Light theme */
:root[data-theme="light"] .tc-nav-link{
  color: #11161b;
}
:root[data-theme="light"] .tc-nav-link:hover{
  color: #000000;
}

/* Hide on small screens (can become hamburger later) */
@media (max-width: 900px){
  .tc-header-nav{
    display: none;
  }
}

#as-filters > *:first-child{ margin-bottom:0 !important; }

@property --tc-angle {
  syntax: '<angle>';
  initial-value: 0deg;
  inherits: false;
}

.tc-aiTopWrap {
  position: relative;
  width: 100%;
  padding: 2px;
  overflow: hidden;
  background: conic-gradient(
    from var(--tc-angle),
    rgba(79,70,229,.2)    0deg,
    rgba(124,58,237,.5)   60deg,
    rgba(167,139,250,.2)  100deg,
    rgba(236,72,153,.0)   160deg,
    rgba(236,72,153,.7)   195deg,
    rgba(255,255,255,1)   200deg,
    rgba(236,72,153,.6)   205deg,
    rgba(236,72,153,.0)   250deg,
    rgba(79,70,229,.2)    310deg,
    rgba(79,70,229,.2)    360deg
  );
  animation: tcSpinBorder 2.8s linear infinite;
  will-change: background;
  transition: box-shadow .22s ease, filter .22s ease;
}

@keyframes tcSpinBorder {
  to { --tc-angle: 360deg; }
}

.tc-aiTopWrap:has(a:hover) {
  animation-duration: 1.1s;
  filter: brightness(1.35) saturate(1.3);
  box-shadow:
    0 0 35px rgba(124,58,237,.3),
    0 0 70px rgba(236,72,153,.12),
    0 14px 40px rgba(0,0,0,.55);
}

:root[data-theme="light"] .tc-aiTopWrap:has(a:hover) {
  box-shadow:
    0 0 28px rgba(124,58,237,.22),
    0 10px 26px rgba(0,0,0,.1);
}

/* Blob + spark layer: completely separate from button */
.tc-aiBlobLayer {
  position: absolute;
  inset: 0;
  pointer-events: none;
  overflow: hidden;
  will-change: transform;
  transform: translateZ(0);
  z-index: 0;
}

.tc-aiBlob {
  position: absolute;
  border-radius: 50%;
  pointer-events: none;
  will-change: transform;
  mix-blend-mode: screen;
}

:root[data-theme="light"] .tc-aiBlob {
  mix-blend-mode: multiply;
}

.tc-aiSpark {
  position: absolute;
  pointer-events: none;
  clip-path: polygon(
    50% 0%,61% 35%,98% 35%,68% 57%,
    79% 91%,50% 70%,21% 91%,32% 57%,
    2% 35%,39% 35%
  );
  animation: tcStarPop var(--d,1s) ease forwards;
  transform-origin: center;
  will-change: transform, opacity;
}

@keyframes tcStarPop {
  0%   { transform:scale(0) rotate(0deg);   opacity:0; }
  25%  { transform:scale(1) rotate(20deg);  opacity:1; }
  75%  { transform:scale(.7) rotate(60deg); opacity:.7; }
  100% { transform:scale(0) rotate(100deg); opacity:0; }
}

/* Button: completely static, nothing ever mutates inside it */
.tc-aiTopBtn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
  width: 100%;
  margin: 0;
  padding: 11px 16px;
  font-size: 17px;
  font-weight: 800;
  letter-spacing: .09em;
  text-transform: uppercase;
  font-family: inherit;
  white-space: nowrap;
  color: #d4c8ff !important;
  text-decoration: none;
  border: none;
  position: relative;
  cursor: pointer;
  background: rgba(6,8,15,.82);
  z-index: 1;
  /* no overflow:hidden — removes any reflow trigger */
  /* no isolation — keeps it off a merged stacking context */
}

:root[data-theme="light"] .tc-aiTopBtn {
  background: rgba(246,242,255,.88);
  color: #2d1052 !important;
}

/* Beam lives on ::after — GPU only, never affects layout */
.tc-aiTopBtn::after {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  background: linear-gradient(
    105deg,
    transparent 30%,
    rgba(255,255,255,.0)  43%,
    rgba(255,255,255,.10) 50%,
    rgba(255,255,255,.0)  57%,
    transparent 70%
  );
  transform: translateX(-120%) skewX(-10deg);
  animation: tcBeam 4.5s cubic-bezier(.4,0,.2,1) infinite;
  will-change: transform;
}

@keyframes tcBeam {
  0%   { transform: translateX(-120%) skewX(-10deg); opacity: 0; }
  5%   { opacity: 1; }
  44%  { transform: translateX(120%) skewX(-10deg); opacity: 1; }
  45%  { opacity: 0; }
  100% { transform: translateX(120%) skewX(-10deg); opacity: 0; }
}

.tc-aiTopBtn:hover::after { animation-duration: 1.6s; }

/* Text: own GPU layer, nothing will ever disturb it */
.tc-aiTopBtn > span {
  position: relative;
  z-index: 1;
  white-space: nowrap;
  will-change: transform;
  transform: translate3d(0,0,0);
  backface-visibility: hidden;
  text-shadow: 0 0 18px rgba(167,139,250,.5);
  transition: text-shadow .25s;
}

:root[data-theme="light"] .tc-aiTopBtn > span { text-shadow: none; }

.tc-aiTopBtn:hover > span {
  text-shadow: 0 0 10px rgba(236,72,153,.9), 0 0 36px rgba(124,58,237,.45);
}

.tc-aiTopBtn svg {
  width: 17px; height: 17px;
  flex-shrink: 0;
  stroke: currentColor;
  stroke-width: 2.2;
  fill: none;
  position: relative;
  z-index: 1;
  will-change: transform;
  transform: translate3d(0,0,0);
  backface-visibility: hidden;
  filter: drop-shadow(0 0 5px rgba(167,139,250,.7));
  transition: transform .3s cubic-bezier(.34,1.56,.64,1), filter .25s;
}

.tc-aiTopBtn:hover svg {
  transform: translate3d(0,0,0) rotate(10deg) scale(1.15);
  filter: drop-shadow(0 0 8px rgba(236,72,153,.95));
}
